import{R as e,r as u,y as L,D as x}from"./index-BDULtanx.js";import{u as A}from"./usePlanningData-CeIF-zwT.js";import{u as B}from"./useCollaborators-DJplpog9.js";import{c as R}from"./editingNavigation-C4r6uhZu.js";import{P as F}from"./PrimaryButton-CcQCH6qR.js";import{S as T}from"./SecondaryButton-CRmxdNPF.js";/* empty css                        */const M={"ceremony/memorial-service":e.createElement("img",{src:"/Picture/icons/memorial-service.svg",alt:"Memorial Service"}),"ceremony/celebration-of-life":e.createElement("img",{src:"/Picture/icons/celebration-of-life.svg",alt:"Celebration of Life"}),"ceremony/traditional-funeral":e.createElement("img",{src:"/Picture/icons/reef.svg",alt:"Traditional Funeral"}),"care/burial":e.createElement("img",{src:"/Picture/icons/casket-picture.svg",alt:"Burial"}),"care/cremation":e.createElement("img",{src:"/Picture/icons/cremation.svg",alt:"Cremation"}),"care/alternatives":e.createElement("img",{src:"/Picture/icons/alternatives.svg",alt:"Alternatives"}),"cremation/kept-at-home":e.createElement("img",{src:"/Picture/icons/kept-at-home-cremation.svg",alt:"Kept at Home"}),"cremation/cemetery-placement":e.createElement("img",{src:"/Picture/icons/cemetery-cremation.svg",alt:"Cemetery Placement"}),"cremation/scattering":e.createElement("img",{src:"/Picture/icons/scattering-cremation.svg",alt:"Scattering"}),"restingPlace/cremation":e.createElement("img",{src:"/Picture/icons/resting-cremation.svg",alt:"Cremation Resting Place"}),"restingPlace/nature":e.createElement("img",{src:"/Picture/icons/tree-simple.svg",alt:"Nature"}),"restingPlace/memorial":e.createElement("img",{src:"/Picture/icons/resting-memorial.svg",alt:"Memorial Resting Place"}),"restingPlace/donation":e.createElement("img",{src:"/Picture/icons/resting-donation.svg",alt:"Donation Resting Place"}),"restingPlace/aerial":e.createElement("img",{src:"/Picture/icons/cloud-aerial.svg",alt:"Aerial"}),"restingPlace/meaningful-location":e.createElement("img",{src:"/Picture/icons/heart-meaningful.svg",alt:"Meaningful Location"}),"restingPlace/natural-burial":e.createElement("img",{src:"/Picture/icons/heart-stem-hands.svg",alt:"Natural Burial"}),"restingPlace/ocean-return":e.createElement("img",{src:"/Picture/icons/wave.svg",alt:"Ocean Return"}),"restingPlace/tree-planting":e.createElement("img",{src:"/Picture/icons/tree-nature.svg",alt:"Tree Planting"}),"restingPlace/keepsake-jewelry":e.createElement("img",{src:"/Picture/icons/hand-diamond.svg",alt:"Keepsake Jewelry"}),"restingPlace/memorial-art":e.createElement("img",{src:"/Picture/icons/pictureframe.svg",alt:"Memorial Art"}),"restingPlace/living-space":e.createElement("img",{src:"/Picture/icons/flowers.svg",alt:"Living Space"}),"restingPlace/donate-science":e.createElement("img",{src:"/Picture/icons/science.svg",alt:"Donate to Science"}),"restingPlace/donate-organs":e.createElement("img",{src:"/Picture/icons/heart-held-hands.svg",alt:"Donate Organs"}),"restingPlace/donate-cause":e.createElement("img",{src:"/Picture/icons/cause.svg",alt:"Donate to Cause"}),"restingPlace/family-plot":e.createElement("img",{src:"/Picture/icons/3-headstone.svg",alt:"Family Plot"}),"restingPlace/cemetery-placement":e.createElement("img",{src:"/Picture/icons/headstone.svg",alt:"Cemetery"}),"burial/traditional-burial":e.createElement("img",{src:"/Picture/icons/headstone.svg",alt:"Traditional Burial"}),"burial/green-burial":e.createElement("img",{src:"/Picture/icons/green-burial.svg",alt:"Green Burial"}),"burial/special-memorial":e.createElement("img",{src:"/Picture/icons/special-memorial.svg",alt:"Special Memorial"}),"alternatives/memorialization":e.createElement("img",{src:"/Picture/icons/memorialization.svg",alt:"Memorialization"}),"alternatives/return-to-nature":e.createElement("img",{src:"/Picture/icons/tree-simple.svg",alt:"Return to Nature"}),"alternatives/donate-body":e.createElement("img",{src:"/Picture/icons/donate-body.svg",alt:"Donate Body"}),"tributes/ceremony":e.createElement("img",{src:"/Picture/icons/list-checkbox-hand.svg",alt:"Ceremony Essentials"}),"tributes/speaker":e.createElement("img",{src:"/Picture/icons/hand-heart.svg",alt:"Honoring Legacy"}),"tributes/story":e.createElement("img",{src:"/Picture/icons/hand-writing.svg",alt:"Meaningful Details"}),"nature/natural-burial":e.createElement("img",{src:"/Picture/icons/heart-stem-hands.svg",alt:"Natural Burial"}),"nature/ocean-return":e.createElement("img",{src:"/Picture/icons/cloud-aerial.svg",alt:"Ocean Return"}),"nature/tree-planting":e.createElement("img",{src:"/Picture/icons/tree-nature.svg",alt:"Tree Planting"})},s=(t,c)=>{const a=`${t}/${c}`;return M[a]||e.createElement("img",{src:"/Picture/icons/default.svg",alt:"Option"})},I=t=>s("tributes",t),z=({formData:t,isReadOnly:c,onEdit:a})=>{const[g,p]=u.useState({}),d=(o,m)=>{m.preventDefault(),p(l=>({...l,[o]:!l[o]}))},E=({fieldId:o,content:m,expanded:l,onToggle:C})=>{const[y,f]=u.useState(!1),v=e.useRef(null);return e.useEffect(()=>{const r=()=>{if(v.current){const i=v.current.scrollHeight>v.current.clientHeight;f(i)}};return r(),window.addEventListener("resize",r),()=>window.removeEventListener("resize",r)},[m]),e.createElement("div",{className:"truncated-field-container"},e.createElement("div",{className:`tribute-content ${l?"expanded":"collapsed"}`},e.createElement("div",{ref:v,className:`choice-card-description ${l?"":"truncate"}`},m)),(y||l)&&e.createElement("button",{onClick:r=>C(o,r),className:`more-options-button ${l?"expanded":""}`,"aria-expanded":l,"aria-label":l?"Show less content":"Show more content"},l?e.createElement("span",{className:"dots-icon expanded"},"⋯"):e.createElement("span",{className:"dots-icon"},"⋯")))};if(!t||Object.keys(t).length===0||!t.basicInformation)return e.createElement("p",null,"No planning data available to display.");const b=t.farewellCare?.choice==="cremation"&&t.farewellCareDetails?.cremation?.choice==="scattering"&&t.restingPlace?.cremation?.details,N=t.farewellCare?.choice==="burial"&&t.restingPlace?.burial?.details,n=t.farewellCare?.choice==="alternatives"&&t.farewellCareDetails?.alternatives?.choice==="return-to-nature"&&t.restingPlace?.nature?.details,h=t.farewellCare?.choice==="alternatives"&&t.farewellCareDetails?.alternatives?.choice==="memorialization"&&t.restingPlace?.memorial?.details,P=t.farewellCare?.choice==="alternatives"&&t.farewellCareDetails?.alternatives?.choice==="donate-body"&&t.restingPlace?.donation?.details;return e.createElement("div",{className:"confirm-wishes-container-display"},e.createElement("div",{className:"confirm-section essential-details-section"},e.createElement("div",{className:"section-header"},e.createElement("h2",null,"Farewell Wishes for")),e.createElement("div",{className:"section-content"},e.createElement("div",{className:"choice-container"},!c&&a&&e.createElement("button",{onClick:()=>a("basicInfo"),className:"card-edit-button","aria-label":"Edit Personal Information"},e.createElement("img",{src:"/Picture/editpencil.svg",alt:"Edit"})),e.createElement("div",{className:"choice-display"},e.createElement("div",{className:"choice-details"},e.createElement("h3",{className:"choice-card-title feature-title"},t.basicInformation?.firstName," ",t.basicInformation?.lastName),e.createElement("p",{className:"choice-card-description"},"Birth Year: ",t.basicInformation?.dateOfBirth),t.basicInformation?.veteranStatus&&e.createElement("p",{className:"choice-card-description"},"Veteran Status: ",t.basicInformation.veteranStatus)))))),t.farewellCeremony?.details&&e.createElement("div",{className:"confirm-section"},e.createElement("div",{className:"section-header"},e.createElement("h2",null,"Farewell Ceremony")),e.createElement("div",{className:"section-content"},e.createElement("div",{className:"choice-container"},!c&&a&&e.createElement("button",{onClick:()=>a("ceremony"),className:"card-edit-button","aria-label":"Edit Ceremony"},e.createElement("img",{src:"/Picture/editpencil.svg",alt:"Edit"})),e.createElement("div",{className:"choice-display"},e.createElement("div",{className:"choice-icon"},s("ceremony",t.farewellCeremony.choice)),e.createElement("div",{className:"choice-details"},e.createElement("h3",{className:"choice-card-title"},t.farewellCeremony.details.title),e.createElement("p",{className:"choice-card-description"},t.farewellCeremony.details.description)))))),t.farewellCare?.details&&e.createElement("div",{className:"confirm-section"},e.createElement("div",{className:"section-header"},e.createElement("h2",null,"Farewell Care")),e.createElement("div",{className:"section-content"},e.createElement("div",{className:"choice-container"},!c&&a&&e.createElement("button",{onClick:()=>a("care"),className:"card-edit-button","aria-label":"Edit Care Option"},e.createElement("img",{src:"/Picture/editpencil.svg",alt:"Edit"})),e.createElement("div",{className:"choice-display"},e.createElement("div",{className:"choice-icon"},s("care",t.farewellCare.choice)),e.createElement("div",{className:"choice-details"},e.createElement("h3",{className:"choice-card-title"},t.farewellCare.details.title),e.createElement("p",{className:"choice-card-description"},t.farewellCare.details.description)))),t.farewellCare?.choice==="cremation"&&t.farewellCareDetails?.cremation?.details&&e.createElement("div",{className:"subchoice-container"},!c&&a&&e.createElement("button",{onClick:()=>a("careDetails"),className:"card-edit-button","aria-label":"Edit Cremation Details"},e.createElement("img",{src:"/Picture/editpencil.svg",alt:"Edit"})),e.createElement("div",{className:"choice-display"},e.createElement("div",{className:"choice-icon"},s("cremation",t.farewellCareDetails.cremation.choice)),e.createElement("div",{className:"choice-details"},e.createElement("h4",{className:"choice-card-title"},t.farewellCareDetails.cremation.details.title),e.createElement("p",{className:"choice-card-description"},t.farewellCareDetails.cremation.details.description)))),t.farewellCare?.choice==="burial"&&t.farewellCareDetails?.burial?.details&&e.createElement("div",{className:"subchoice-container"},!c&&a&&e.createElement("button",{onClick:()=>a("careDetails"),className:"card-edit-button","aria-label":"Edit Burial Details"},e.createElement("img",{src:"/Picture/editpencil.svg",alt:"Edit"})),e.createElement("div",{className:"choice-display"},e.createElement("div",{className:"choice-icon"},s("burial",t.farewellCareDetails.burial.choice)),e.createElement("div",{className:"choice-details"},e.createElement("h4",{className:"choice-card-title"},t.farewellCareDetails.burial.details.title),e.createElement("p",{className:"choice-card-description"},t.farewellCareDetails.burial.details.description)))),t.farewellCare?.choice==="alternatives"&&t.farewellCareDetails?.alternatives?.details&&e.createElement("div",{className:"subchoice-container"},!c&&a&&e.createElement("button",{onClick:()=>a("careDetails"),className:"card-edit-button","aria-label":"Edit Alternative Care Details"},e.createElement("img",{src:"/Picture/editpencil.svg",alt:"Edit"})),e.createElement("div",{className:"choice-display"},e.createElement("div",{className:"choice-icon"},s("alternatives",t.farewellCareDetails.alternatives.choice)),e.createElement("div",{className:"choice-details"},e.createElement("h4",{className:"choice-card-title"},t.farewellCareDetails.alternatives.details.title),e.createElement("p",{className:"choice-card-description"},t.farewellCareDetails.alternatives.details.description)))))),(t.restingPlace?.cremation?.choice||t.restingPlace?.burial?.choice||t.restingPlace?.nature?.choice||t.restingPlace?.memorial?.choice||t.restingPlace?.donation?.choice)&&e.createElement("div",{className:"confirm-section"},e.createElement("div",{className:"section-header"},e.createElement("h2",null,"Resting Place")),e.createElement("div",{className:"section-content"},b&&e.createElement("div",{className:"choice-container"},!c&&a&&e.createElement("button",{onClick:()=>a("restingPlace"),className:"card-edit-button","aria-label":"Edit Resting Place"},e.createElement("img",{src:"/Picture/editpencil.svg",alt:"Edit"})),e.createElement("div",{className:"choice-display"},e.createElement("div",{className:"choice-icon"},s("restingPlace",t.restingPlace.cremation.choice)),e.createElement("div",{className:"choice-details"},e.createElement("h4",{className:"choice-card-title"},t.restingPlace.cremation.details.title),e.createElement("p",{className:"choice-card-description"},t.restingPlace.cremation.details.description)))),N&&e.createElement("div",{className:"choice-container"},!c&&a&&e.createElement("button",{onClick:()=>a("restingPlace"),className:"card-edit-button","aria-label":"Edit Burial Resting Place"},e.createElement("img",{src:"/Picture/editpencil.svg",alt:"Edit"})),e.createElement("div",{className:"choice-display"},e.createElement("div",{className:"choice-icon"},s("restingPlace",t.restingPlace.burial.choice)),e.createElement("div",{className:"choice-details"},e.createElement("h4",{className:"choice-card-title"},t.restingPlace.burial.details.title),e.createElement("p",{className:"choice-card-description"},t.restingPlace.burial.details.description)))),n&&e.createElement("div",{className:"choice-container"},!c&&a&&e.createElement("button",{onClick:()=>a("restingPlace"),className:"card-edit-button","aria-label":"Edit Resting Place"},e.createElement("img",{src:"/Picture/editpencil.svg",alt:"Edit"})),e.createElement("div",{className:"choice-display"},e.createElement("div",{className:"choice-icon"},s("restingPlace",t.restingPlace.nature.choice)),e.createElement("div",{className:"choice-details"},e.createElement("h4",{className:"choice-card-title"},t.restingPlace.nature.details.title),e.createElement("p",{className:"choice-card-description"},t.restingPlace.nature.details.description)))),h&&e.createElement("div",{className:"choice-container"},!c&&a&&e.createElement("button",{onClick:()=>a("restingPlace"),className:"card-edit-button","aria-label":"Edit Resting Place"},e.createElement("img",{src:"/Picture/editpencil.svg",alt:"Edit"})),e.createElement("div",{className:"choice-display"},e.createElement("div",{className:"choice-icon"},s("restingPlace",t.restingPlace.memorial.choice)),e.createElement("div",{className:"choice-details"},e.createElement("h4",{className:"choice-card-title"},t.restingPlace.memorial.details.title),e.createElement("p",{className:"choice-card-description"},t.restingPlace.memorial.details.description)))),P&&e.createElement("div",{className:"choice-container"},!c&&a&&e.createElement("button",{onClick:()=>a("restingPlace"),className:"card-edit-button","aria-label":"Edit Resting Place"},e.createElement("img",{src:"/Picture/editpencil.svg",alt:"Edit"})),e.createElement("div",{className:"choice-display"},e.createElement("div",{className:"choice-icon"},s("restingPlace",t.restingPlace.donation.choice)),e.createElement("div",{className:"choice-details"},e.createElement("h4",{className:"choice-card-title"},t.restingPlace.donation.details.title),e.createElement("p",{className:"choice-card-description"},t.restingPlace.donation.details.description)))))),e.createElement("div",{className:"confirm-section"},e.createElement("div",{className:"section-header"},e.createElement("h2",null,"Farewell Tributes")),e.createElement("div",{className:"section-content"},e.createElement("div",{className:"tribute-item"},!c&&a&&e.createElement("button",{onClick:()=>a("tributes-ceremony"),className:"card-edit-button","aria-label":"Edit Ceremony Essentials"},e.createElement("img",{src:"/Picture/editpencil.svg",alt:"Edit"})),e.createElement("div",{className:"choice-display"},e.createElement("div",{className:"choice-icon"},I("ceremony")),e.createElement("div",{className:"choice-details"},e.createElement("h3",{className:"choice-card-title"},"Ceremony Essentials"),e.createElement("p",{className:"choice-card-description"},e.createElement("strong",null,"Religious/Spiritual Preference:")," ",t.tributes?.ceremony?.religiousPreference||"Not specified"),e.createElement(E,{fieldId:"ceremonySetting",content:e.createElement(e.Fragment,null,e.createElement("strong",null,"Setting:")," ",t.tributes?.ceremony?.ceremonySetting||"Not specified"),expanded:g.ceremonySetting,onToggle:d})))),e.createElement("div",{className:"tribute-item"},!c&&a&&e.createElement("button",{onClick:()=>a("tributes-speaker"),className:"card-edit-button","aria-label":"Edit Legacy Details"},e.createElement("img",{src:"/Picture/editpencil.svg",alt:"Edit"})),e.createElement("div",{className:"choice-display"},e.createElement("div",{className:"choice-icon"},I("speaker")),e.createElement("div",{className:"choice-details"},e.createElement("h3",{className:"choice-card-title"},"Honoring Your Legacy"),e.createElement("p",{className:"choice-card-description"},e.createElement("strong",null,"Speaker/Leader:")," ",t.tributes?.speaker?.speakerLabel||"Not specified"),e.createElement(E,{fieldId:"musicReadings",content:e.createElement(e.Fragment,null,e.createElement("strong",null,"Music & Readings:")," ",t.tributes?.speaker?.musicAndReadings||"Not specified"),expanded:g.musicReadings,onToggle:d})))),t.tributes?.story&&e.createElement("div",{className:"tribute-item"},!c&&a&&e.createElement("button",{onClick:()=>a("tributes-story"),className:"card-edit-button","aria-label":"Edit Story"},e.createElement("img",{src:"/Picture/editpencil.svg",alt:"Edit"})),e.createElement("div",{className:"choice-display"},e.createElement("div",{className:"choice-icon"},I("story")),e.createElement("div",{className:"choice-details"},e.createElement("h3",{className:"choice-card-title"},"Meaningful Details"),e.createElement(E,{fieldId:"story",content:t.tributes?.story?.text||"Not specified",expanded:g.story,onToggle:d})))))))},J=()=>{const t=L(),{formData:c,savePlanToBackend:a,isLoading:g,error:p}=A(),{isAuthenticated:d,isLoading:E,user:b}=x();u.useEffect(()=>{console.log("Auth state:",{isAuthenticated:d,user:b})},[d,b]);const N=B(),n=N?.collaborators||[];N?.isLoading;const[h,P]=u.useState(!1),[o,m]=u.useState(null);u.useEffect(()=>{window.scrollTo(0,0)},[]);const l=r=>{const i=R(r,c,"/confirm-wishes");switch(r){case"ceremony":t("/farewell-ceremony",{state:i});break;case"care":t("/farewell-care",{state:{...i,currentCareChoice:c.farewellCare?.choice}});break;case"careDetails":const k=c.farewellCare?.choice;k==="cremation"?c.farewellCareDetails?.cremation?.choice==="scattering"?t("/resting-place-scattering",{state:{...i,source:"cremation",skipTributes:!0}}):t("/farewell-care-cremation",{state:{...i,skipTributes:!0}}):k==="burial"?t("/farewell-care-burial",{state:{...i,skipTributes:!0}}):k==="alternatives"?t("/care-alternatives",{state:{...i,skipTributes:!0}}):t("/farewell-care",{state:{...i,skipTributes:!0}});break;case"tributes-ceremony":t("/tributes-ceremony",{state:i});break;case"tributes-speaker":t("/tributes-speaker",{state:i});break;case"tributes-story":t("/tributes-story",{state:i});break;case"restingPlace":const S=c.farewellCare?.choice;if(S==="cremation"&&c.farewellCareDetails?.cremation?.choice==="scattering")t("/resting-place-scattering",{state:i});else if(S==="alternatives"){const w=c.farewellCareDetails?.alternatives?.choice;w==="memorialization"?t("/resting-place-memorial",{state:i}):w==="return-to-nature"?t("/resting-place-nature",{state:i}):w==="donate-body"&&t("/resting-place-donate",{state:i})}else S==="burial"&&t("/resting-place-burial",{state:i});break;case"basicInfo":t("/basic-information",{state:i});break;default:t("/basic-information",{state:i})}},C=async()=>{P(!0),m(null);try{await a(),t("/add-collaborators",{state:{fromConfirmWishes:!0}})}catch(r){console.error("Error:",r),m("An error occurred while saving your plan. Please try again.")}finally{P(!1)}},y=()=>{t("/tributes-story")},f=()=>{t("/collaborator/dashboard")};return E||g&&(!c||!c.basicInformation)?e.createElement("div",{className:"loading-container",style:{textAlign:"center",padding:"50px"}},"Loading your plan details..."):p&&(!c||!c.basicInformation)?e.createElement("div",{className:"error-container",style:{textAlign:"center",padding:"50px",color:"red"}},"Error loading your plan: ",p,".",e.createElement("br",null),e.createElement(T,{onClick:()=>window.location.reload(),style:{marginTop:"1rem"}},"Try Again")):e.createElement("div",{className:"confirm-wishes-page-wrapper"},e.createElement("div",{className:"confirm-wishes-header-container"},e.createElement("h1",null,e.createElement("span",{className:"h1b"},"Farewell"),e.createElement("span",{className:"h1"},"Wishes")),e.createElement("span",{className:"h1sub"},"Confirm your choices before your share. You can update them anytime.")),n&&n.length>0&&e.createElement("div",{className:"page-header-actions"},e.createElement("div",{className:"collaborators-container"},e.createElement("button",{className:"shared-with-button",onClick:f,"aria-label":"View people this plan is shared with"},e.createElement("span",{className:"shared-with-text"},"Shared With"),e.createElement("div",{className:"collaborator-avatars"},n.slice(0,3).map((r,i)=>e.createElement("div",{key:r.id,className:"collaborator-avatar",title:r.name||r.fullName},(r.name||r.fullName||"").charAt(0))),n.length>3&&e.createElement("div",{className:"collaborator-more"},"+",n.length-3))))),e.createElement(z,{formData:c,isReadOnly:!1,onEdit:l}),o&&e.createElement("p",{className:"error-message",style:{color:"red",textAlign:"center",marginTop:"1rem"}},o),e.createElement("div",{className:"confirm-actions"},e.createElement(T,{onClick:y,disabled:h},e.createElement("span",{className:"go-back-icon","aria-hidden":"true"},"←")," Go back"),e.createElement(F,{onClick:C,disabled:h,style:{width:"15rem",height:"4rem"}},h?"Saving...":"Save & Share")))};export{J as default};
