import{y as S,z as k,D as x,r as d,R as e}from"./index-CV2AwHHn.js";import{u as I}from"./usePlanningData-DRFU8PFb.js";import{F as g}from"./FormBox-BvgUTFHa.js";import{S as y}from"./StandardLayout-CEb1FvtQ.js";import{P as o}from"./PrimaryButton-DP35kgbg.js";import"./PageWrapper-C5Vnm9u7.js";import"./Footer-CFYzvQ76.js";const b=[{iconSrc:"/Picture/LP-Note-Write.svg",altText:"Plan and Update Icon",title:"Plan with Confidence",text:" Create and revisit your farewell anytime. Your life may change — your legacy can grow with it."},{iconSrc:"/Picture/email.svg",altText:"Share Icon",title:"Share with Clarity",text:"Make your wishes known, so the people you love don’t have to guess — or carry the burden alone."}],U=()=>{const s=S(),m=k(),{formData:t,isLoading:f,loadPlanData:c}=I(),{user:r,isAuthenticated:n,isLoading:u,error:N}=x(),h=d.useRef(!1),p=m.state?.isNewUser===!0||!t||!t._metadata?.lastVisitedStep&&(!t.basicInformation||Object.keys(t.basicInformation).length===0),l=!p&&!!(t&&(t._metadata&&t._metadata.lastVisitedStep||t.basicInformation&&Object.keys(t.basicInformation).length>0)),E=()=>{s("/basic-information")},v=()=>{const a=t?._metadata?.lastVisitedStep,i=t?._metadata?.isCompleted;s(i?"/confirm-wishes":a||"/basic-information")},w=()=>{s("/basic-information",{state:{startFresh:!0}})};return d.useEffect(()=>{const a=m.state?.isNewUser===!0||!t||!t._metadata?.lastVisitedStep&&(!t.basicInformation||Object.keys(t.basicInformation).length===0);n&&r?.userId&&!a&&c()},[n,r?.userId,c,m.state]),d.useEffect(()=>{n&&r?.userId&&!h.current&&(c(),h.current=!0)},[n,r?.userId,c]),f||u?p&&n&&!u?e.createElement(y,{title:e.createElement(e.Fragment,null,e.createElement("span",{className:"h1"},"Your")," ",e.createElement("span",{className:"h1b"},"farewell")," ",e.createElement("span",{className:"h1"},"is more than a will")),subtitle:e.createElement("span",{className:"h1sub"},"We're here to shape your legacy — your voice, your way.")},e.createElement(g,{className:"standard-formbox"},e.createElement("div",{className:"welcome-features"},b.map((a,i)=>e.createElement("div",{key:i,className:"feature-item"},e.createElement("div",{className:"feature-icon-container"},e.createElement("img",{src:a.iconSrc,alt:a.altText,className:"feature-icon"})),e.createElement("div",{className:"feature-text-container"},e.createElement("h3",{className:"feature-title"},a.title),e.createElement("p",{className:"feature-description"},a.text))))),e.createElement("div",{className:"invite-primary-button",style:{display:"flex",justifyContent:"center",gap:"1rem"}},e.createElement(o,{onClick:E},"Start Planning")))):e.createElement("div",{className:"app-loading"},"Loading...",e.createElement("br",null),e.createElement("span",{style:{color:"red",fontWeight:"bold"}},"Debug: WelcomeScreen is waiting for plan data or authentication to finish."),e.createElement("br",null),e.createElement("div",{style:{color:"blue",marginTop:8}},e.createElement("div",null,"authIsLoading: ",String(u)),e.createElement("div",null,"isLoading (plan): ",String(f)),e.createElement("div",null,"isAuthenticated: ",String(n)),e.createElement("div",null,"User: ",r?JSON.stringify(r):"null"),e.createElement("div",null,"Auth Error: ",N||"none")),e.createElement("br",null),"If this never disappears, check your network, backend, or authentication state."):e.createElement(y,{title:e.createElement(e.Fragment,null,e.createElement("span",{className:"h1"},l?"Welcome":"Your")," ",e.createElement("span",{className:"h1b"},l?"back!":"farewell")," ",e.createElement("span",{className:"h1"},l?"":"is more than a will")),subtitle:e.createElement("span",{className:"h1sub"},l?"We found your existing farewell plan. What would you like to do?":"We're here to shape your legacy — your voice, your way.")},e.createElement(g,{className:"standard-formbox"},e.createElement("div",{className:"welcome-features"},b.map((a,i)=>e.createElement("div",{key:i,className:"feature-item"},e.createElement("div",{className:"feature-icon-container"},e.createElement("img",{src:a.iconSrc,alt:a.altText,className:"feature-icon"})),e.createElement("div",{className:"feature-text-container"},e.createElement("h3",{className:"feature-title"},a.title),e.createElement("p",{className:"feature-description"},a.text))))),e.createElement("div",{className:"invite-primary-button",style:{display:"flex",justifyContent:"center",gap:"1rem"}},l?e.createElement(e.Fragment,null,e.createElement(o,{onClick:v},"Resume Planning"),e.createElement(o,{onClick:w,style:{background:"#fff",color:"#333",border:"2px solid #ccc"}},"Start Fresh")):e.createElement(o,{onClick:E},"Start Planning"))))};export{U as default};
