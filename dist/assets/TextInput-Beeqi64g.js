import{r as n,R as t}from"./index-C2ptP9zk.js";import{r as W}from"./TextInput-C3p8qorw.js";const Q=({id:d,name:k,label:L,type:b="text",value:l,onChange:$,placeholder:R,helper:P,error:f,disabled:p,options:c=[],multiline:v=!1,textareaClassName:T="",containerClassName:_="",...B})=>{const[x,H]=n.useState(!1),[o,m]=n.useState(!1),[N,M]=n.useState({top:0,left:0,width:0}),[s,u]=n.useState(-1),E=n.useRef(null),a=n.useRef(null),i=n.useRef(null),g=n.useRef(null),y=b==="password",w=b==="dropdown",A=y?x?"text":"password":b,S=w?c.find(e=>e.value===l):null,I=n.useCallback(()=>{if(v&&i.current){i.current.style.height="auto";const e=i.current.scrollHeight>0?i.current.scrollHeight:0;i.current.style.height=`${e}px`;const r=parseFloat(getComputedStyle(i.current).getPropertyValue("--textarea-max-height"))||240;e>r?i.current.classList.add("scrollable"):i.current.classList.remove("scrollable")}},[v]);n.useEffect(()=>{I()},[l,I]),n.useEffect(()=>{if(o&&a.current){const e=a.current.getBoundingClientRect();M({top:e.bottom+window.scrollY,left:e.left+window.scrollX,width:e.width})}},[o]);const h=n.useCallback(()=>{if(!p){const e=!o;if(m(e),e){const r=c.findIndex(F=>F.value===l);u(r!==-1?r:0)}else u(-1),a.current&&a.current.focus()}},[p,o,c,l]),C=n.useCallback(e=>{$({target:{name:k,value:e.value}}),m(!1),u(-1),a.current&&a.current.focus()},[k,$]),j=n.useCallback(e=>{if(!(p||!w))switch(e.key){case"Enter":case" ":e.preventDefault(),o?s>=0&&s<c.length&&C(c[s]):h();break;case"ArrowDown":e.preventDefault(),o?u(r=>r<c.length-1?r+1:0):h();break;case"ArrowUp":e.preventDefault(),o?u(r=>r>0?r-1:c.length-1):h();break;case"Escape":o&&(m(!1),u(-1),a.current&&a.current.focus());break;case"Tab":o&&(m(!1),u(-1));break}},[p,o,s,c.length,C,h,w]);n.useEffect(()=>{if(o&&s>=0&&g.current){const e=document.getElementById(`dropdown-option-${d}-${s}`);e&&e.scrollIntoView({block:"nearest"})}},[s,o,d]),n.useEffect(()=>{if(!w)return;const e=r=>{a.current&&!a.current.contains(r.target)&&g.current&&!g.current.contains(r.target)&&m(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[w]);const{multiline:z,textareaClassName:K,containerClassName:V,options:Y,helper:U,label:X,helperText:q,...O}=B,D={id:d,name:k,className:`text-input ${l?"filled":""} ${f?"error":""}`,value:l,onChange:e=>{$(e)},placeholder:R,disabled:p,...O};return t.createElement("div",{className:`text-input-wrapper ${_}`,ref:E},L&&t.createElement("label",{htmlFor:d,className:"text-label"},L),w?t.createElement("div",{className:"input-container dropdown-container"},t.createElement("div",{ref:a,className:`text-input dropdown-display ${o?"focused":""} ${l?"filled":""} ${f?"error":""} ${p?"disabled":""}`,onClick:h,onKeyDown:j,tabIndex:p?-1:0,role:"combobox","aria-haspopup":"listbox","aria-expanded":o,"aria-controls":o?`dropdown-list-${d}`:void 0,...O},t.createElement("span",null,S?S.label:t.createElement("span",{className:"dropdown-placeholder"},R)),t.createElement("svg",{className:`dropdown-arrow ${o?"dropdown-arrow-open":""}`,width:"10",height:"6",viewBox:"0 0 10 6",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t.createElement("path",{d:"M1 1L5 5L9 1",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}))),o&&W.createPortal(t.createElement("ul",{id:`dropdown-list-${d}`,className:"dropdown-list farewell-scrollbar",style:{position:"absolute",top:`${N.top}px`,left:`${N.left}px`,width:`${N.width}px`},role:"listbox","aria-activedescendant":s>=0?`dropdown-option-${d}-${s}`:void 0,ref:g},c.map((e,r)=>t.createElement("li",{key:e.value,id:`dropdown-option-${d}-${r}`,className:`dropdown-list-item ${e.value===l?"dropdown-list-item-selected":""} ${r===s?"dropdown-list-item-focused":""}`,onClick:()=>C(e),role:"option","aria-selected":e.value===l||r===s,onMouseEnter:()=>u(r)},e.label))),document.body)):v?t.createElement("div",{className:"input-container"},t.createElement("textarea",{ref:e=>{i.current=e,E&&(E.current=e)},...D,className:`${D.className} ${T}`,rows:1,style:{overflowY:"hidden"}})):t.createElement("div",{className:`input-container ${y?"password-input-container":""}`},"          ",t.createElement("input",{ref:e=>{E.current=e},type:A,...D}),y&&t.createElement("button",{type:"button",className:"password-toggle",onClick:()=>H(!x),"aria-label":x?"Hide password":"Show password"},x?t.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},t.createElement("path",{d:"M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"}),t.createElement("line",{x1:"1",y1:"1",x2:"23",y2:"23"})):t.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},t.createElement("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),t.createElement("circle",{cx:"12",cy:"12",r:"3"})))),P&&!f&&t.createElement("div",{className:"input-helper-text"},P),f&&t.createElement("div",{className:"error-helper"},f))};export{Q as T};
