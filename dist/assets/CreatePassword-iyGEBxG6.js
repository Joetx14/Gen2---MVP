import{r as o,y as h,R as e,B as v,C as p}from"./index-C2ptP9zk.js";import{S as P}from"./StandardLayout-AckhbhSc.js";import{F as N}from"./FormBox-B7cn36Ju.js";import{T as m}from"./TextInput-Beeqi64g.js";import{P as C}from"./PrimaryButton-n6jbjVyb.js";/* empty css                        */import"./PageWrapper-BzhDbW5c.js";import"./Footer-CZyU5Jsg.js";import"./TextInput-C3p8qorw.js";const _=()=>{const[t,f]=o.useState(""),[s,w]=o.useState(""),[c,y]=o.useState(""),[u,a]=o.useState(""),[g,n]=o.useState(!1),d=h(),E=async r=>{if(r.preventDefault(),a(""),n(!0),!t){a("Email is required"),n(!1);return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)){a("Please enter a valid email address."),n(!1);return}if(s.length<8){a("Password must be at least 8 characters"),n(!1);return}if(s!==c){a("Passwords do not match"),n(!1);return}try{const{isSignUpComplete:l}=await v({username:t.trim(),password:s,attributes:{email:t.trim()}});if(l){await new Promise(i=>setTimeout(i,2e3)),console.log("Signing in with email:",t);try{const{isSignedIn:i}=await p({username:t.trim(),password:s});i?(localStorage.removeItem("isNewUser"),d("/welcome",{state:{isNewUser:!1}})):a("Sign in failed after registration. Please try logging in.")}catch(i){if(i.name==="EmptySignInUsername"){await new Promise(b=>setTimeout(b,1e3));const{isSignedIn:S}=await p({username:t.trim(),password:s});if(S){localStorage.removeItem("isNewUser"),d("/welcome",{state:{isNewUser:!1}});return}}a(i.message||"Registration failed. Please try again.")}}else a("Sign up incomplete. Please try again.")}catch(l){console.error("Sign up error:",l),a(l.message||"Registration failed. Please try again.")}finally{n(!1)}};return e.createElement(P,{title:e.createElement(e.Fragment,null,e.createElement("h2",{className:"h1sub pre-title-subtitle"},"Create your account"),e.createElement("span",{className:"h1"},"Set your ",e.createElement("span",{className:"h1b"},"email")," and ",e.createElement("span",{className:"h1b"},"password")," to complete registration."))},e.createElement("div",{className:"onboarding-form-content"},e.createElement(N,{className:"onboarding-formbox"},e.createElement("form",{className:"standard-form",onSubmit:E,noValidate:!0},e.createElement(m,{label:"Email Address",value:t,onChange:r=>f(r.target.value),type:"email",required:!0,autoFocus:!0}),e.createElement(m,{label:"Create Password",value:s,onChange:r=>w(r.target.value),type:"password",placeholder:"Create a secure password",required:!0,helperText:"Use at least 8 characters"}),e.createElement(m,{label:"Confirm Password",value:c,onChange:r=>y(r.target.value),type:"password",placeholder:"Confirm your password",required:!0}),u&&e.createElement("div",{className:"error-message"},u),e.createElement("div",{className:"onboarding-button-container"},e.createElement(C,{type:"submit",disabled:g},g?"Creating Account...":"Create Account")),e.createElement("p",{className:"privacy-text"},"By creating an account you are accepting our"," ",e.createElement("a",{href:"/terms",target:"_blank",rel:"noreferrer",className:"privacy-link"},"Terms of Service")," ","and"," ",e.createElement("a",{href:"/privacy",target:"_blank",rel:"noreferrer",className:"privacy-link"},"Privacy Policy"),".")))))};export{_ as default};
