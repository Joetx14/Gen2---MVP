import{I as E,J as h,K as v,M as x,N as O,U as T,V as _,P as c,Q as p,W as N,X as y,Y as V,Z as w,a2 as g,a3 as D,a4 as l,$ as M}from"./index-CmCb-4LB.js";import{a9 as H,a7 as J,a8 as W,a5 as b,C as k,a6 as B,B as K}from"./index-CmCb-4LB.js";import{r as X}from"./resetPassword-DGHNTBtl.js";import{c as Z}from"./confirmResetPassword-DE-U5sRa.js";const R=o=>E(O,x("ConfirmSignUp"),v(),{...h,...o});async function L(o){const{username:e,confirmationCode:s,options:a}=o,t=T.getConfig().Auth?.Cognito;_(t);const{userPoolId:u,userPoolClientId:C,userPoolEndpoint:S}=t,d=a?.clientMetadata;c(!!e,p.EmptyConfirmSignUpUsername),c(!!s,p.EmptyConfirmSignUpCode);const m=N({username:e,userPoolId:u,userPoolClientId:C}),U=R({endpointResolver:M({endpointOverride:S})}),{Session:f}=await U({region:V(t.userPoolId),userAgentValue:y(w.ConfirmSignUp)},{Username:e,ConfirmationCode:s,ClientMetadata:d,ForceAliasCreation:a?.forceAliasCreation,ClientId:t.userPoolClientId,UserContextData:m});return new Promise((r,I)=>{try{const n={isSignUpComplete:!0,nextStep:{signUpStep:"DONE"}},i=g.getState();if(!i.active||i.username!==e){r(n),D();return}g.dispatch({type:"SET_SESSION",value:f});const A=l.listen("auth-internal",({payload:P})=>{switch(P.event){case"autoSignIn":r({isSignUpComplete:!0,nextStep:{signUpStep:"COMPLETE_AUTO_SIGN_IN"}}),A()}});l.dispatch("auth-internal",{event:"confirmSignUp",data:n})}catch(n){I(n)}})}export{H as AuthError,Z as confirmResetPassword,L as confirmSignUp,J as decodeJWT,W as fetchAuthSession,b as getCurrentUser,X as resetPassword,k as signIn,B as signOut,K as signUp};
