import{R as e,z as B,y as z,E as I,r as h}from"./index-DCjRC1Qh.js";import{F as D}from"./FormBox-DkndR2MF.js";import{P as $}from"./PrimaryButton-ll28UtQI.js";import{S as G}from"./SecondaryButton-BWRSsnoD.js";/* empty css                        */import{P as V}from"./PageWrapper-DCjSe1-g.js";const S=({currentStep:a,currentSubStep:i,steps:s,isOpen:c,onToggle:o})=>e.createElement(e.Fragment,null,e.createElement("nav",{className:`step-nav ${c?"open":"closed"}`},e.createElement("div",{className:`step-nav-bg ${c?"open":"closed"}`},e.createElement("button",{className:"stepnav-toggle",onClick:o,"aria-label":c?"Collapse navigation":"Expand navigation"},e.createElement("img",{src:c?"/Picture/nav-arrow-left.svg":"/Picture/nav-arrow-right.svg",alt:"",className:"stepnav-toggle-icon"})),e.createElement("ul",{className:"step-nav-list"},s.map((t,m)=>{const r=t.id<a,l=t.id===a;return e.createElement("li",{key:t.key||t.id,className:`step-nav-item ${r?"complete":l?"active":"future"}`},e.createElement("div",{className:"step-indicator-column"},e.createElement("div",{className:`step-nav-indicator ${r?"complete":l?"active":"future"}`},r?e.createElement("img",{src:"/Picture/checkmark.svg",alt:"Completed",className:"step-checkmark-icon"}):l?e.createElement("span",{className:"step-number-checkmark"},String(t.id).padStart(2,"0")):e.createElement("span",{className:"step-number"},String(t.id).padStart(2,"0"))),l&&t.substeps&&t.substeps.length>0&&e.createElement("div",{className:"substep-container"},t.substeps.map((b,u)=>{const f=u+1,g=i>f,k=i===f;return e.createElement(e.Fragment,{key:b.key||b.id||b.path||u},e.createElement("div",{className:`substep-indicator ${g?"complete":k?"current":"future"}`}),u<t.substeps.length-1&&e.createElement("div",{className:`substep-connector ${t.substeps[u+1].id<=i?"complete":""}`,"aria-hidden":"true"}))})),m<s.length-1&&e.createElement("div",{className:`step-vertical-line ${r?"complete":""}`})),c&&e.createElement("div",{className:"step-content-column"},e.createElement("span",{className:"nav-step"},t.label)))})))),e.createElement("div",{className:"mobile-step-nav mobile-only"},e.createElement("div",{className:"mobile-step-indicators"},s.map((t,m)=>{const r=t.id<a,l=t.id===a;return e.createElement(e.Fragment,{key:t.key||t.id},e.createElement("div",{className:`mobile-step-dot ${r?"complete":l?"current":"future"}`,"aria-label":`Step ${t.id}: ${t.label} ${r?"complete":l?"current":"upcoming"}`},r&&e.createElement("img",{src:"/Picture/checkmark.svg",alt:"",className:"mobile-checkmark-icon"}),l&&e.createElement("span",{className:"mobile-step-number"},String(t.id).padStart(2,"0"))),m<s.length-1&&e.createElement("div",{className:`mobile-step-connector ${r?"complete":""}`,"aria-hidden":"true"}))})))),W=({children:a,onClick:i,disabled:s=!1,className:c="",...o})=>{const t=`secondary-button ${c}`.trim();return e.createElement("button",{className:t,onClick:i,disabled:s,"aria-label":`Go back: ${typeof a=="string"?a:""}`,...o},e.createElement("img",{src:"/Picture/goback--arrow-right.svg",alt:"Go back arrow",className:"secondary-button-icon"}),a)},y="farewellNavOpenPreference",q=({title:a,subtitle:i,currentStep:s,currentSubStep:c=0,onGoBack:o,onSkip:t,getStepData:m,nextRoute:r,showNavButtons:l=!0,buttonsRowClassName:b="",rightButtonsClassName:u="",formBoxClassName:f="",defaultNavClosed:g=!1,children:k})=>{const d=B(),F=z(),{formData:x,savePlanStep:L,trackStepVisit:w}=I();h.useEffect(()=>{(d.pathname.includes("/planning")||d.pathname.includes("/farewell-")||d.pathname.includes("/tribute"))&&w(d.pathname)},[d.pathname,w]);const p=h.useCallback(()=>window.innerWidth<=768,[]),[E,v]=h.useState(()=>{if(p())return!1;const n=localStorage.getItem(y);return n!==null?n==="true":!g}),C=async()=>{if(!m||!r){console.warn("getStepData or nextRoute not provided to PlanningLayout");return}try{const n=m();await L(n),F(r)}catch(n){console.error("Error saving and continuing:",n)}};h.useEffect(()=>{const n=()=>{if(p())v(!1);else{const N=localStorage.getItem(y);v(N!==null?N==="true":!g)}};return window.addEventListener("resize",n),p()&&v(!1),()=>window.removeEventListener("resize",n)},[g,p]),h.useEffect(()=>{p()||localStorage.setItem(y,E.toString())},[E,p]);const P=[{id:1,label:"Essential Details",key:"essential-details"},{id:2,label:"Farewell Ceremony",key:"farewell-ceremony"},{id:3,label:"Farewell Care",key:"farewell-care",substeps:[{label:"Care Choice",path:"/farewell-care",key:"care-choice"},{label:"Care Details",path:"/farewell-care-details",key:"care-details"}]},{id:4,label:"Resting Place",key:"resting-place",substeps:(()=>{switch(x?.farewellCare?.choice){case"cremation":return[{label:"Cremation Options",path:"/resting-place/cremation"},{label:"Scattering Location",path:"/resting-place/scattering"}];case"burial":return[{label:"Burial Options",path:"/resting-place/burial"},{label:"Gravesite Location",path:"/resting-place/gravesite"}];default:return[]}})().map((n,N)=>({...n,key:n.path||N}))},{id:5,label:"Farewell Tributes",key:"farewell-tributes",substeps:[{label:"Setting & Spirit",path:"/tributes/setting",key:"setting-spirit"},{label:"Voice & Meaning",path:"/tributes/voice",key:"voice-meaning"},{label:"Legacy Reflections",path:"/tributes/legacy",key:"legacy-reflections"}]},{id:6,label:"Confirm Wishes",key:"confirm-wishes"}],R=`form-buttons-row ${b}`.trim(),A=`form-right-buttons ${u}`.trim();return e.createElement(V,null,e.createElement("div",{className:`planning-page-container ${E?"nav-open":""}`},e.createElement("aside",{className:"planning-stepnav desktop-only"},e.createElement(S,{currentStep:s,currentSubStep:c,steps:P,isOpen:E,onToggle:()=>v(n=>!n)})),e.createElement("div",{className:"mobile-only"},e.createElement(S,{currentStep:s,steps:P})),e.createElement("div",{className:`planning-form-container ${E?"nav-open":"nav-closed"}`},e.createElement("div",{className:"standard-formbox"},e.createElement("header",{className:"planning-header"},e.createElement("h1",{className:"planning-heading"},a&&typeof a=="string"&&a.includes(" ")?e.createElement(e.Fragment,null,e.createElement("span",{className:"h1b"},a.split(" ")[0])," ",e.createElement("span",{className:"h1"},a.split(" ").slice(1).join(" "))):a?e.createElement("span",{className:"h1"},a):null),i&&e.createElement("h2",{className:"planning-subtitle h1sub"},i)),e.createElement(D,{className:`planning-formbox ${f}`.trim()},e.createElement("div",{className:"form-content"},k),l&&e.createElement(e.Fragment,null,e.createElement("div",{className:`${R} desktop-buttons`},o&&e.createElement(W,{onClick:o},"Go back"),e.createElement("div",{className:A},t&&e.createElement(G,{onClick:t},"Skip for now"),m&&r&&e.createElement($,{onClick:C},"Save & continue"))),e.createElement("div",{className:"mobile-buttons-container"},m&&r&&e.createElement($,{onClick:C,className:"mobile-primary-button button-text"},"Save & continue"),e.createElement("div",{className:"mobile-tertiary-buttons"},o&&e.createElement("button",{onClick:o,className:"mobile-back-button tertiary-button-text","aria-label":"Go back to previous step"},e.createElement("img",{src:"/Picture/goback--arrow-right.svg",alt:"",className:"button-arrow left-arrow",width:"16",height:"16","aria-hidden":"true"}),"Back"),t&&e.createElement("button",{onClick:t,className:"mobile-skip-button tertiary-button-text","aria-label":"Skip this step"},"Skip",e.createElement("img",{src:"/Picture/arrow-right.svg",alt:"",className:"button-arrow right-arrow",width:"16",height:"16","aria-hidden":"true"}))))))))))};export{q as P};
