import{R as e,r as l,L as A}from"./index-DIgv-R-A.js";import{S as p}from"./StandardLayout-CYUUsMFS.js";import{T}from"./TextInput-SRGVC-8b.js";import{P as D}from"./PrimaryButton-BzDtkROL.js";import{S as F}from"./SecondaryButton-DHDs-4Ai.js";import{s as I}from"./Resources-DF3-wGUt.js";import"./PageWrapper-BBELcwmB.js";import"./Footer-B6iBRH4i.js";import"./TextInput-t1vq7Fiq.js";/* empty css                        */const B=({placeholder:o,value:c,onChange:i})=>e.createElement(T,{type:"text",placeholder:o||"Search...",value:c,onChange:a=>i(a.target.value),rightIcon:e.createElement("span",null,e.createElement("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e.createElement("path",{d:"M21 21L15 15M17 10C17 13.866 13.866 17 10 17C6.13401 17 3 13.866 3 10C3 6.13401 6.13401 3 10 3C13.866 3 17 6.13401 17 10Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})))}),O=({topics:o,selectedTopic:c,onSelectTopic:i})=>e.createElement("div",{className:"resources-filter-bar",style:{marginBottom:"var(--spacing-xl)",textAlign:"center"}},o.map(a=>c===a?e.createElement(D,{key:a,onClick:()=>i(a),className:"filter-button active",style:{marginRight:"var(--spacing-sm)"}},a):e.createElement(F,{key:a,onClick:()=>i(a),className:"filter-button",style:{marginRight:"var(--spacing-sm)"}},a))),z=()=>{const[o,c]=l.useState([]),[i,a]=l.useState([]),[r,f]=l.useState(null),[u,w]=l.useState("All"),[C,L]=l.useState(["All"]),[d,b]=l.useState(""),[k,E]=l.useState(!0),[N,y]=l.useState(null);l.useEffect(()=>{(async()=>{E(!0),y(null);const n=`*[_type == "article"] | order(publishedOn desc) {
        title,
        "slug": slug.current,
        mainImage,
        "categories": categories[]->{title, "slug": slug.current},
        publishedOn,
        shortDesc,
        featured
      }`;try{const s=await I.fetch(n),g=s.find(m=>m.featured===!0);if(g){f(g);const m=s.filter(h=>h!==g);c(m||[]),a(m||[])}else f(s[0]),c(s.slice(1)||[]),a(s.slice(1)||[]);const S=new Set(["All"]);(s||[]).forEach(m=>{m.categories?.forEach(h=>S.add(h.title))}),L(Array.from(S))}catch(s){console.error("Failed to fetch articles:",s),y("Failed to load articles. Please try again later."),c([]),a([])}finally{E(!1)}})()},[]),l.useEffect(()=>{let t=[...o];if(u!=="All"&&(t=t.filter(n=>n.categories?.some(s=>s.title===u))),d){const n=d.toLowerCase();t=t.filter(s=>s.title?.toLowerCase().includes(n)||s.shortDesc?.toLowerCase().includes(n))}a(t)},[u,d,o]);const x=t=>{w(t)},R=t=>{b(t)},v=t=>new Date(t).toLocaleDateString("en-GB",{day:"numeric",month:"long",year:"numeric"});return k?e.createElement(p,{title:"Resources"},e.createElement("p",{className:"loading-message"},"Loading articles...")):N?e.createElement(p,{title:"Resources"},e.createElement("p",{className:"error-message"},N)):e.createElement(e.Fragment,null,e.createElement(p,{title:"Articles & insights that will help you navigate",subtitle:"Explore topics by category or discover our latest publications.",className:"resources-page"},e.createElement("div",{className:"resources-controls"},e.createElement(O,{topics:C,selectedTopic:u,onSelectTopic:x}),e.createElement(B,{placeholder:"Search articles...",value:d,onChange:R})),r&&!d&&u==="All"&&e.createElement("div",{className:"featured-article"},e.createElement("div",{className:"featured-article-content"},e.createElement("div",{className:"featured-article-image"},r.mainImage?e.createElement("img",{src:urlFor(r.mainImage).width(600).height(400).url(),alt:r.title}):e.createElement("div",{className:"placeholder-image"})),e.createElement("div",{className:"featured-article-details"},r.categories&&r.categories[0]&&e.createElement("span",{className:"article-category"},r.categories[0].title),r.publishedOn&&e.createElement("span",{className:"article-date"},v(r.publishedOn)),e.createElement("h2",{className:"featured-article-title"},r.title),r.shortDesc&&e.createElement("p",{className:"featured-article-excerpt"},r.shortDesc),e.createElement(A,{to:`/resources/${r.slug}`,className:"read-article-link"},"Read article ",e.createElement("span",{className:"arrow"},"→"))))),e.createElement("div",{className:"resources-article-grid"},i.length>0?i.map(t=>e.createElement("div",{key:t.slug,className:"article-card"},e.createElement("div",{className:"article-image"},t.mainImage?e.createElement("img",{src:urlFor(t.mainImage).width(400).height(250).url(),alt:t.title}):e.createElement("div",{className:"placeholder-image"})),e.createElement("div",{className:"article-content"},e.createElement("div",{className:"article-meta"},t.categories&&t.categories[0]&&e.createElement("span",{className:"article-category"},t.categories[0].title),t.publishedOn&&e.createElement("span",{className:"article-date"},v(t.publishedOn))),e.createElement("h3",{className:"article-title"},t.title),t.shortDesc&&e.createElement("p",{className:"article-excerpt"},t.shortDesc),e.createElement(A,{to:`/resources/${t.slug}`,className:"read-article-link"},"Read article ",e.createElement("span",{className:"arrow"},"→"))))):e.createElement("p",{className:"no-articles-message"},"No articles found matching your search criteria. Try adjusting your filters or search term."))))};export{z as default};
