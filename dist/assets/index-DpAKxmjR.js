import{J as E,K as h,M as v,N as x,P as O,V as T,W as _,Q as c,U as p,X as N,Y as y,Z as D,$ as V,a3 as g,a4 as w,a5 as l,a0 as M}from"./index-CF6624GP.js";import{a9 as H,a7 as J,a8 as W,D as b,C as k,a6 as B,B as K}from"./index-CF6624GP.js";import{r as X}from"./resetPassword-B9b06fCS.js";import{c as Z}from"./confirmResetPassword-Cz4GP96z.js";const R=o=>E(O,x("ConfirmSignUp"),v(),{...h,...o});async function L(o){const{username:e,confirmationCode:s,options:a}=o,t=T.getConfig().Auth?.Cognito;_(t);const{userPoolId:u,userPoolClientId:C,userPoolEndpoint:S}=t,d=a?.clientMetadata;c(!!e,p.EmptyConfirmSignUpUsername),c(!!s,p.EmptyConfirmSignUpCode);const m=N({username:e,userPoolId:u,userPoolClientId:C}),U=R({endpointResolver:M({endpointOverride:S})}),{Session:f}=await U({region:D(t.userPoolId),userAgentValue:y(V.ConfirmSignUp)},{Username:e,ConfirmationCode:s,ClientMetadata:d,ForceAliasCreation:a?.forceAliasCreation,ClientId:t.userPoolClientId,UserContextData:m});return new Promise((r,I)=>{try{const n={isSignUpComplete:!0,nextStep:{signUpStep:"DONE"}},i=g.getState();if(!i.active||i.username!==e){r(n),w();return}g.dispatch({type:"SET_SESSION",value:f});const A=l.listen("auth-internal",({payload:P})=>{switch(P.event){case"autoSignIn":r({isSignUpComplete:!0,nextStep:{signUpStep:"COMPLETE_AUTO_SIGN_IN"}}),A()}});l.dispatch("auth-internal",{event:"confirmSignUp",data:n})}catch(n){I(n)}})}export{H as AuthError,Z as confirmResetPassword,L as confirmSignUp,J as decodeJWT,W as fetchAuthSession,b as getCurrentUser,X as resetPassword,k as signIn,B as signOut,K as signUp};
