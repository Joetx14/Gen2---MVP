import{a as S,r as s,j as e}from"./react-vendor-C_ls207L.js";import{b as C}from"./index-zctVBz0Z.js";import{S as _}from"./StandardLayout-CHsFjCWf.js";import{F as A}from"./FormBox-Dl2qNixC.js";import{T as x}from"./TextInput-BQHZCKtc.js";import{P as k}from"./PrimaryButton-BzVl43HT.js";/* empty css             */import"./vendor-DeJPPs1q.js";import"./sanity-BS235U2J.js";import"./amplify-core-Blotw2Bg.js";import"./stripe-CN_WJsnY.js";import"./PageWrapper-CRYaw3_L.js";import"./Footer-B_S_3MWt.js";/* empty css                  */const q=()=>{const{user:n,updateUserProfile:g,deleteAccount:j}=C(),y=S(),[o,c]=s.useState(""),[d,m]=s.useState(""),[i,u]=s.useState(!0),[a,l]=s.useState(!1),[p,r]=s.useState(""),[f,h]=s.useState(!1);s.useEffect(()=>{n&&(c(n.displayName||""),m(n.email||""),u(n.subscribed!==!1))},[n]);const N=async t=>{t.preventDefault(),l(!0),r("");try{await g({displayName:o,email:d,subscribed:i}),r("Profile updated successfully!")}catch(v){r(`Error updating profile: ${v.message}`)}finally{l(!1)}},b=async()=>{if(!f){h(!0);return}l(!0);try{await j(),y("/")}catch(t){r(`Error deleting account: ${t.message}`),l(!1)}};return e.jsx(_,{title:"Account Settings",subtitle:"Manage your profile and account preferences",children:e.jsxs(A,{children:[e.jsxs("form",{onSubmit:N,className:"auth-form",children:[e.jsx("h2",{children:"Personal Information"}),e.jsx(x,{id:"name",name:"name",label:"Full Name",placeholder:"Your full name",value:o,onChange:t=>c(t.target.value),disabled:a,containerClassName:"auth-form__input-field"}),e.jsx(x,{id:"email",name:"email",type:"email",label:"Email Address",placeholder:"Your email address",value:d,onChange:t=>m(t.target.value),disabled:a,containerClassName:"auth-form__input-field"}),e.jsxs("div",{className:"preference-toggle",children:[e.jsxs("label",{className:"checkbox-container",children:[e.jsx("input",{type:"checkbox",checked:i,onChange:()=>u(!i),disabled:a}),e.jsx("span",{className:"checkmark"}),"Receive updates and notifications"]}),e.jsx("p",{className:"preference-description",children:"We'll send you important updates about your account and farewell planning."})]}),p&&e.jsx("p",{className:"auth-form__message",role:"alert",children:p}),e.jsx("div",{className:"auth-form__button-container",children:e.jsx(k,{type:"submit",disabled:a,className:"auth-form__submit-button",children:a?"Saving...":"Save Changes"})})]}),e.jsxs("div",{className:"danger-zone",children:[e.jsx("h2",{children:"Delete Account"}),e.jsx("p",{children:"This action is permanent and cannot be undone. All your personal information and farewell plans will be permanently removed."}),f?e.jsxs("div",{className:"delete-confirmation",children:[e.jsx("p",{children:"Are you sure you want to delete your account?"}),e.jsxs("div",{className:"delete-actions",children:[e.jsx("button",{className:"delete-confirm-btn",onClick:b,disabled:a,children:a?"Deleting...":"Yes, Delete My Account"}),e.jsx("button",{className:"delete-cancel-btn",onClick:()=>h(!1),disabled:a,children:"Cancel"})]})]}):e.jsx("button",{className:"delete-account-btn",onClick:b,disabled:a,children:"Delete My Account"})]})]})})};export{q as default};
