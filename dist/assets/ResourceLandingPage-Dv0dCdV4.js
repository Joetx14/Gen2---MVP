import{j as e,r as i,L as S}from"./react-vendor-C_ls207L.js";import{S as x}from"./StandardLayout-CHsFjCWf.js";import{T as R}from"./TextInput-BQHZCKtc.js";import{P as E}from"./PrimaryButton-BzVl43HT.js";import{S as F}from"./SecondaryButton-Dd0XyVMs.js";import{s as I}from"./Resources-BEHiDCZc.js";import"./vendor-DeJPPs1q.js";import"./sanity-BS235U2J.js";import"./PageWrapper-CRYaw3_L.js";import"./Footer-B_S_3MWt.js";/* empty css                  *//* empty css                        */const B=({placeholder:d,value:c,onChange:n})=>e.jsx(R,{type:"text",placeholder:d||"Search...",value:c,onChange:t=>n(t.target.value),rightIcon:e.jsx("span",{children:e.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M21 21L15 15M17 10C17 13.866 13.866 17 10 17C6.13401 17 3 13.866 3 10C3 6.13401 6.13401 3 10 3C13.866 3 17 6.13401 17 10Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})}),O=({topics:d,selectedTopic:c,onSelectTopic:n})=>e.jsx("div",{className:"resources-filter-bar",style:{marginBottom:"var(--spacing-xl)",textAlign:"center"},children:d.map(t=>c===t?e.jsx(E,{onClick:()=>n(t),className:"filter-button active",style:{marginRight:"var(--spacing-sm)"},children:t},t):e.jsx(F,{onClick:()=>n(t),className:"filter-button",style:{marginRight:"var(--spacing-sm)"},children:t},t))}),K=()=>{const[d,c]=i.useState([]),[n,t]=i.useState([]),[a,f]=i.useState(null),[m,A]=i.useState("All"),[w,C]=i.useState(["All"]),[u,L]=i.useState(""),[b,j]=i.useState(!0),[N,y]=i.useState(null);i.useEffect(()=>{(async()=>{j(!0),y(null);const o=`*[_type == "article"] | order(publishedOn desc) {
        title,
        "slug": slug.current,
        mainImage,
        "categories": categories[]->{title, "slug": slug.current},
        publishedOn,
        shortDesc,
        featured
      }`;try{const r=await I.fetch(o),l=r.find(h=>h.featured===!0);if(l){f(l);const h=r.filter(p=>p!==l);c(h||[]),t(h||[])}else f(r[0]),c(r.slice(1)||[]),t(r.slice(1)||[]);const g=new Set(["All"]);(r||[]).forEach(h=>{var p;(p=h.categories)==null||p.forEach(D=>g.add(D.title))}),C(Array.from(g))}catch(r){console.error("Failed to fetch articles:",r),y("Failed to load articles. Please try again later."),c([]),t([])}finally{j(!1)}})()},[]),i.useEffect(()=>{let s=[...d];if(m!=="All"&&(s=s.filter(o=>{var r;return(r=o.categories)==null?void 0:r.some(l=>l.title===m)})),u){const o=u.toLowerCase();s=s.filter(r=>{var l,g;return((l=r.title)==null?void 0:l.toLowerCase().includes(o))||((g=r.shortDesc)==null?void 0:g.toLowerCase().includes(o))})}t(s)},[m,u,d]);const T=s=>{A(s)},k=s=>{L(s)},v=s=>new Date(s).toLocaleDateString("en-GB",{day:"numeric",month:"long",year:"numeric"});return b?e.jsx(x,{title:"Resources",children:e.jsx("p",{className:"loading-message",children:"Loading articles..."})}):N?e.jsx(x,{title:"Resources",children:e.jsx("p",{className:"error-message",children:N})}):e.jsx(e.Fragment,{children:e.jsxs(x,{title:"Articles & insights that will help you navigate",subtitle:"Explore topics by category or discover our latest publications.",className:"resources-page",children:[e.jsxs("div",{className:"resources-controls",children:[e.jsx(O,{topics:w,selectedTopic:m,onSelectTopic:T}),e.jsx(B,{placeholder:"Search articles...",value:u,onChange:k})]}),a&&!u&&m==="All"&&e.jsx("div",{className:"featured-article",children:e.jsxs("div",{className:"featured-article-content",children:[e.jsx("div",{className:"featured-article-image",children:a.mainImage?e.jsx("img",{src:urlFor(a.mainImage).width(600).height(400).url(),alt:a.title}):e.jsx("div",{className:"placeholder-image"})}),e.jsxs("div",{className:"featured-article-details",children:[a.categories&&a.categories[0]&&e.jsx("span",{className:"article-category",children:a.categories[0].title}),a.publishedOn&&e.jsx("span",{className:"article-date",children:v(a.publishedOn)}),e.jsx("h2",{className:"featured-article-title",children:a.title}),a.shortDesc&&e.jsx("p",{className:"featured-article-excerpt",children:a.shortDesc}),e.jsxs(S,{to:`/resources/${a.slug}`,className:"read-article-link",children:["Read article ",e.jsx("span",{className:"arrow",children:"→"})]})]})]})}),e.jsx("div",{className:"resources-article-grid",children:n.length>0?n.map(s=>e.jsxs("div",{className:"article-card",children:[e.jsx("div",{className:"article-image",children:s.mainImage?e.jsx("img",{src:urlFor(s.mainImage).width(400).height(250).url(),alt:s.title}):e.jsx("div",{className:"placeholder-image"})}),e.jsxs("div",{className:"article-content",children:[e.jsxs("div",{className:"article-meta",children:[s.categories&&s.categories[0]&&e.jsx("span",{className:"article-category",children:s.categories[0].title}),s.publishedOn&&e.jsx("span",{className:"article-date",children:v(s.publishedOn)})]}),e.jsx("h3",{className:"article-title",children:s.title}),s.shortDesc&&e.jsx("p",{className:"article-excerpt",children:s.shortDesc}),e.jsxs(S,{to:`/resources/${s.slug}`,className:"read-article-link",children:["Read article ",e.jsx("span",{className:"arrow",children:"→"})]})]})]},s.slug)):e.jsx("p",{className:"no-articles-message",children:"No articles found matching your search criteria. Try adjusting your filters or search term."})})]})})};export{K as default};
