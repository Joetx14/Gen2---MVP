import{j as e,d as $,u as B,a as I,r as j}from"./react-vendor-C_ls207L.js";import{a as z}from"./index-zctVBz0Z.js";import{F as G}from"./FormBox-Dl2qNixC.js";import{P as E}from"./PrimaryButton-BzVl43HT.js";import{S as V}from"./SecondaryButton-Dd0XyVMs.js";/* empty css                        */import{P as W}from"./PageWrapper-CRYaw3_L.js";const S=({currentStep:a,currentSubStep:c,steps:r,isOpen:l,onToggle:o})=>e.jsxs(e.Fragment,{children:[e.jsx("nav",{className:`step-nav ${l?"open":"closed"}`,children:e.jsxs("div",{className:`step-nav-bg ${l?"open":"closed"}`,children:[e.jsx("button",{className:"stepnav-toggle",onClick:o,"aria-label":l?"Collapse navigation":"Expand navigation",children:e.jsx("img",{src:l?"/Picture/nav-arrow-left.svg":"/Picture/nav-arrow-right.svg",alt:"",className:"stepnav-toggle-icon"})}),e.jsx("ul",{className:"step-nav-list",children:r.map((s,m)=>{const n=s.id<a,i=s.id===a;return e.jsxs("li",{className:`step-nav-item ${n?"complete":i?"active":"future"}`,children:[e.jsxs("div",{className:"step-indicator-column",children:[e.jsx("div",{className:`step-nav-indicator ${n?"complete":i?"active":"future"}`,children:n?e.jsx("img",{src:"/Picture/checkmark.svg",alt:"Completed",className:"step-checkmark-icon"}):i?e.jsx("span",{className:"step-number-checkmark",children:String(s.id).padStart(2,"0")}):e.jsx("span",{className:"step-number",children:String(s.id).padStart(2,"0")})}),i&&s.substeps&&s.substeps.length>0&&e.jsx("div",{className:"substep-container",children:s.substeps.map((p,u)=>{const f=u+1,b=c>f,N=c===f;return e.jsxs($.Fragment,{children:[e.jsx("div",{className:`substep-indicator ${b?"complete":N?"current":"future"}`}),u<s.substeps.length-1&&e.jsx("div",{className:`substep-connector ${s.substeps[u+1].id<=c?"complete":""}`,"aria-hidden":"true"})]},p.key||p.id||p.path||u)})}),m<r.length-1&&e.jsx("div",{className:`step-vertical-line ${n?"complete":""}`})]}),l&&e.jsx("div",{className:"step-content-column",children:e.jsx("span",{className:"nav-step",children:s.label})})]},s.key||s.id)})})]})}),e.jsx("div",{className:"mobile-step-nav mobile-only",children:e.jsx("div",{className:"mobile-step-indicators",children:r.map((s,m)=>{const n=s.id<a,i=s.id===a;return e.jsxs($.Fragment,{children:[e.jsxs("div",{className:`mobile-step-dot ${n?"complete":i?"current":"future"}`,"aria-label":`Step ${s.id}: ${s.label} ${n?"complete":i?"current":"upcoming"}`,children:[n&&e.jsx("img",{src:"/Picture/checkmark.svg",alt:"",className:"mobile-checkmark-icon"}),i&&e.jsx("span",{className:"mobile-step-number",children:String(s.id).padStart(2,"0")})]}),m<r.length-1&&e.jsx("div",{className:`mobile-step-connector ${n?"complete":""}`,"aria-hidden":"true"})]},s.key||s.id)})})})]}),M=({children:a,onClick:c,disabled:r=!1,className:l="",...o})=>{const s=`secondary-button ${l}`.trim();return e.jsxs("button",{className:s,onClick:c,disabled:r,"aria-label":`Go back: ${typeof a=="string"?a:""}`,...o,children:[e.jsx("img",{src:"/Picture/goback--arrow-right.svg",alt:"Go back arrow",className:"secondary-button-icon"}),a]})},y="farewellNavOpenPreference",J=({title:a,subtitle:c,currentStep:r,currentSubStep:l=0,onGoBack:o,onSkip:s,getStepData:m,nextRoute:n,showNavButtons:i=!0,buttonsRowClassName:p="",rightButtonsClassName:u="",formBoxClassName:f="",defaultNavClosed:b=!1,children:N})=>{const g=B(),F=I(),{formData:k,savePlanStep:L,trackStepVisit:w}=z();j.useEffect(()=>{(g.pathname.includes("/planning")||g.pathname.includes("/farewell-")||g.pathname.includes("/tribute"))&&w(g.pathname)},[g.pathname,w]);const h=j.useCallback(()=>window.innerWidth<=768,[]),[v,x]=j.useState(()=>{if(h())return!1;const t=localStorage.getItem(y);return t!==null?t==="true":!b}),C=async()=>{if(!m||!n){console.warn("getStepData or nextRoute not provided to PlanningLayout");return}try{const t=m();await L(t),F(n)}catch(t){console.error("Error saving and continuing:",t)}};j.useEffect(()=>{const t=()=>{if(h())x(!1);else{const d=localStorage.getItem(y);x(d!==null?d==="true":!b)}};return window.addEventListener("resize",t),h()&&x(!1),()=>window.removeEventListener("resize",t)},[b,h]),j.useEffect(()=>{h()||localStorage.setItem(y,v.toString())},[v,h]);const P=[{id:1,label:"Essential Details",key:"essential-details"},{id:2,label:"Farewell Ceremony",key:"farewell-ceremony"},{id:3,label:"Farewell Care",key:"farewell-care",substeps:[{label:"Care Choice",path:"/farewell-care",key:"care-choice"},{label:"Care Details",path:"/farewell-care-details",key:"care-details"}]},{id:4,label:"Resting Place",key:"resting-place",substeps:(()=>{var d;switch((d=k==null?void 0:k.farewellCare)==null?void 0:d.choice){case"cremation":return[{label:"Cremation Options",path:"/resting-place/cremation"},{label:"Scattering Location",path:"/resting-place/scattering"}];case"burial":return[{label:"Burial Options",path:"/resting-place/burial"},{label:"Gravesite Location",path:"/resting-place/gravesite"}];default:return[]}})().map((t,d)=>({...t,key:t.path||d}))},{id:5,label:"Farewell Tributes",key:"farewell-tributes",substeps:[{label:"Setting & Spirit",path:"/tributes/setting",key:"setting-spirit"},{label:"Voice & Meaning",path:"/tributes/voice",key:"voice-meaning"},{label:"Legacy Reflections",path:"/tributes/legacy",key:"legacy-reflections"}]},{id:6,label:"Confirm Wishes",key:"confirm-wishes"}],R=`form-buttons-row ${p}`.trim(),A=`form-right-buttons ${u}`.trim();return e.jsx(W,{children:e.jsxs("div",{className:`planning-page-container ${v?"nav-open":""}`,children:[e.jsx("aside",{className:"planning-stepnav desktop-only",children:e.jsx(S,{currentStep:r,currentSubStep:l,steps:P,isOpen:v,onToggle:()=>x(t=>!t)})}),e.jsx("div",{className:"mobile-only",children:e.jsx(S,{currentStep:r,steps:P})}),e.jsx("div",{className:`planning-form-container ${v?"nav-open":"nav-closed"}`,children:e.jsxs("div",{className:"standard-formbox",children:[e.jsxs("header",{className:"planning-header",children:[e.jsx("h1",{className:"planning-heading",children:a&&typeof a=="string"&&a.includes(" ")?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"h1b",children:a.split(" ")[0]})," ",e.jsx("span",{className:"h1",children:a.split(" ").slice(1).join(" ")})]}):a?e.jsx("span",{className:"h1",children:a}):null}),c&&e.jsx("h2",{className:"planning-subtitle h1sub",children:c})]}),e.jsxs(G,{className:`planning-formbox ${f}`.trim(),children:[e.jsx("div",{className:"form-content",children:N}),i&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:`${R} desktop-buttons`,children:[o&&e.jsx(M,{onClick:o,children:"Go back"}),e.jsxs("div",{className:A,children:[s&&e.jsx(V,{onClick:s,children:"Skip for now"}),m&&n&&e.jsx(E,{onClick:C,children:"Save & continue"})]})]}),e.jsxs("div",{className:"mobile-buttons-container",children:[m&&n&&e.jsx(E,{onClick:C,className:"mobile-primary-button button-text",children:"Save & continue"}),e.jsxs("div",{className:"mobile-tertiary-buttons",children:[o&&e.jsxs("button",{onClick:o,className:"mobile-back-button tertiary-button-text","aria-label":"Go back to previous step",children:[e.jsx("img",{src:"/Picture/goback--arrow-right.svg",alt:"",className:"button-arrow left-arrow",width:"16",height:"16","aria-hidden":"true"}),"Back"]}),s&&e.jsxs("button",{onClick:s,className:"mobile-skip-button tertiary-button-text","aria-label":"Skip this step",children:["Skip",e.jsx("img",{src:"/Picture/arrow-right.svg",alt:"",className:"button-arrow right-arrow",width:"16",height:"16","aria-hidden":"true"})]})]})]})]})]})]})})]})})};export{J as P};
