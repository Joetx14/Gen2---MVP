const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-BlkkT8Xy.js","assets/index-DIgv-R-A.js","assets/index-ClTZAVw-.css","assets/resetPassword-N0FR0WH4.js","assets/confirmResetPassword-DqRYE9Sy.js"])))=>i.map(i=>d[i]);
import{r as s,E as _,y as k,z as L,R as o,L as g,C as R,w as A}from"./index-DIgv-R-A.js";import{F as M}from"./FormBox-BY7geAnO.js";import{T as v}from"./TextInput-SRGVC-8b.js";import{P as U}from"./PrimaryButton-BzDtkROL.js";import{S as T}from"./StandardLayout-CYUUsMFS.js";/* empty css                        */import"./TextInput-t1vq7Fiq.js";import"./PageWrapper-BBELcwmB.js";import"./Footer-B6iBRH4i.js";const $=()=>{const[r,u]=s.useState(""),[a,x]=s.useState(""),[N,c]=s.useState(""),[I,m]=s.useState(""),[f,E]=s.useState(!1),[S,t]=s.useState(""),[y,w]=s.useState(""),{formData:d}=_(),h=k(),n=L();s.useEffect(()=>{n.state?.message&&(w(n.state.message),n.state?.email&&u(n.state.email))},[n.state]);const P=async i=>{i.preventDefault(),c(""),m(""),t("");let p=!0;if(r||(c("Email is required"),p=!1),a||(m("Password is required"),p=!1),!!p){E(!0);try{console.log("🔐 Attempting sign in with:",{email:r,passwordLength:a.length}),console.log("📧 Email format check:",/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r));const e=await R({username:r,password:a});if(console.log("✅ Sign in result:",e),console.log("🔑 isSignedIn:",e.isSignedIn),console.log("🔄 nextStep:",e.nextStep),e.isSignedIn){console.log("User is signed in successfully");const l=d._metadata?.lastVisitedStep||d._metadata?.completedSteps?.length>0||Object.keys(d.basicInformation||{}).length>0;h(l?"/welcome-back":"/welcome")}else if(console.log("❓ Sign in not complete. NextStep details:",e.nextStep),console.log("📋 NextStep type:",e.nextStep?.signInStep),console.log("📝 Additional info:",e.nextStep?.additionalInfo),e.nextStep?.signInStep==="CONFIRM_SIGN_UP"){t("Account needs verification. Attempting to verify automatically..."),console.log("📧 User needs verification - attempting auto-confirm for MVP");try{const{confirmSignUp:l}=await A(async()=>{const{confirmSignUp:b}=await import("./index-BlkkT8Xy.js");return{confirmSignUp:b}},__vite__mapDeps([0,1,2,3,4]));await l({username:r,confirmationCode:"000000"})}catch(l){console.log("Auto-confirm failed (expected):",l),t("Please contact support to verify your account for this MVP.")}}else e.nextStep?.signInStep==="CONFIRM_SIGN_IN_WITH_NEW_PASSWORD_REQUIRED"?(t("Password change required. Please contact support."),console.log("🔐 User needs to change password")):e.nextStep?.signInStep==="CONFIRM_SIGN_IN_WITH_SMS_MFA"?(t("SMS verification required. This is not currently supported."),console.log("📱 SMS MFA required")):(t("Sign in incomplete. Please check your credentials."),console.log("❓ Unknown sign-in step required"))}catch(e){console.error("❌ Login error details:"),console.error("- Error name:",e.name),console.error("- Error message:",e.message),console.error("- Error code:",e.code),console.error("- Full error:",e),console.error("- Email used:",r),console.error("- Password length:",a.length),e.$response&&(console.error("- Response status:",e.$response.statusCode),console.error("- Response body:",e.$response.body)),e.name==="NotAuthorizedException"?(m("Incorrect username or password"),console.error("🚫 This usually means wrong password or user needs confirmation")):e.name==="UserNotFoundException"?(c("No account found with this email address"),console.error("👤 User not found - check if registration completed successfully")):e.name==="TooManyRequestsException"?t("Too many login attempts. Please try again later."):e.name==="UserNotConfirmedException"?(t("Account not verified. Please check your email for verification link."),console.error("📧 User exists but not confirmed - check email verification")):e.name==="InvalidParameterException"?(t("Invalid login parameters. Please check your email format."),console.error("⚠️ Invalid parameters - likely email format issue")):(t(e.message||"Login failed. Please try again."),console.error("❓ Unhandled error type:",e.name))}finally{E(!1)}}};return o.createElement(T,{title:o.createElement(o.Fragment,null,o.createElement("h2",{className:"h1sub pre-title-subtitle"},"Good to see you again. Your plans, your pace."),o.createElement("span",{className:"h1"},"Let's continue your ",o.createElement("span",{className:"h1b"},"farewell")," ",o.createElement("span",{className:"h1"},"journey."))),className:"login-page"},o.createElement("div",{className:"onboarding-form-content"},o.createElement(M,{className:"onboarding-formbox"},o.createElement("form",{className:"standard-form",onSubmit:P,noValidate:!0},"            ",o.createElement(v,{label:"Email",value:r,onChange:i=>{u(i.target.value),c("")},type:"email",error:N,required:!0}),o.createElement(v,{label:"Password",value:a,onChange:i=>{x(i.target.value),m(""),t("")},type:"password",error:I,required:!0}),y&&o.createElement("div",{className:"success-message",style:{color:"#27ae60",fontSize:"14px",marginTop:"10px",textAlign:"center",backgroundColor:"#d5f4e6",padding:"10px",borderRadius:"4px",border:"1px solid #27ae60"}},y),S&&o.createElement("div",{className:"error-message",style:{color:"#e74c3c",fontSize:"14px",marginTop:"10px",textAlign:"center"}},S),o.createElement("div",{className:"forgot-password-link"},o.createElement(g,{to:"/forgot-password"},"Forgot password?")),o.createElement("div",{className:"onboarding-button-container"},o.createElement(U,{type:"submit",disabled:f},f?"Logging in...":"Log In")),o.createElement("div",{className:"onboarding-privacy-container"},o.createElement("p",{className:"privacy-text"},"By logging in you are accepting our"," ",o.createElement(g,{to:"/terms",className:"privacy-link"},"Terms of Service")," ","and"," ",o.createElement(g,{to:"/privacy",className:"privacy-link"},"Privacy Policy"),"."))))))};export{$ as default};
