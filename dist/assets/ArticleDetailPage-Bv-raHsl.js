import{r as v,u as X,R as c,L}from"./index-DIgv-R-A.js";import{S as O}from"./StandardLayout-CYUUsMFS.js";import{s as R}from"./Resources-DF3-wGUt.js";import"./PageWrapper-BBELcwmB.js";import"./Footer-B6iBRH4i.js";var D={exports:{}},E={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var A;function Z(){if(A)return E;A=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(r,s,l){var f=null;if(l!==void 0&&(f=""+l),s.key!==void 0&&(f=""+s.key),"key"in s){l={};for(var u in s)u!=="key"&&(l[u]=s[u])}else l=s;return s=l.ref,{$$typeof:e,type:r,key:f,ref:s!==void 0?s:null,props:l}}return E.Fragment=t,E.jsx=n,E.jsxs=n,E}var B;function ee(){return B||(B=1,D.exports=Z()),D.exports}var p=ee();function M(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function C(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?M(Object(n),!0).forEach(function(r){te(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):M(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function te(e,t,n){return(t=ne(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ne(e){var t=re(e,"string");return typeof t=="symbol"?t:t+""}function re(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function T(e){return e._type==="span"&&"text"in e&&typeof e.text=="string"&&(typeof e.marks>"u"||Array.isArray(e.marks)&&e.marks.every(t=>typeof t=="string"))}function z(e){return typeof e._type=="string"&&e._type[0]!=="@"&&(!("markDefs"in e)||!e.markDefs||Array.isArray(e.markDefs)&&e.markDefs.every(t=>typeof t._key=="string"))&&"children"in e&&Array.isArray(e.children)&&e.children.every(t=>typeof t=="object"&&"_type"in t)}function H(e){return z(e)&&"listItem"in e&&typeof e.listItem=="string"&&(typeof e.level>"u"||typeof e.level=="number")}function K(e){return e._type==="@list"}function Y(e){return e._type==="@span"}function Q(e){return e._type==="@text"}const U=["strong","em","code","underline","strike-through"];function ie(e,t,n){if(!T(e)||!e.marks)return[];if(!e.marks.length)return[];const r=e.marks.slice(),s={};return r.forEach(l=>{s[l]=1;for(let f=t+1;f<n.length;f++){const u=n[f];if(u&&T(u)&&Array.isArray(u.marks)&&u.marks.indexOf(l)!==-1)s[l]++;else break}}),r.sort((l,f)=>le(s,l,f))}function le(e,t,n){const r=e[t],s=e[n];if(r!==s)return s-r;const l=U.indexOf(t),f=U.indexOf(n);return l!==f?l-f:t.localeCompare(n)}function se(e){var t,n;const{children:r}=e,s=(t=e.markDefs)!=null?t:[];if(!r||!r.length)return[];const l=r.map(ie),f={_type:"@span",children:[],markType:"<unknown>"};let u=[f];for(let h=0;h<r.length;h++){const b=r[h];if(!b)continue;const _=l[h]||[];let o=1;if(u.length>1)for(o;o<u.length;o++){const a=((n=u[o])==null?void 0:n.markKey)||"",m=_.indexOf(a);if(m===-1)break;_.splice(m,1)}u=u.slice(0,o);let i=u[u.length-1];if(i){for(const a of _){const m=s?.find(k=>k._key===a),y=m?m._type:a,d={_type:"@span",_key:b._key,children:[],markDef:m,markType:y,markKey:a};i.children.push(d),u.push(d),i=d}if(T(b)){const a=b.text.split(`
`);for(let m=a.length;m-- >1;)a.splice(m,0,`
`);i.children=i.children.concat(a.map(m=>({_type:"@text",text:m})))}else i.children=i.children.concat(b)}}return f.children}function ae(e,t){const n=[];let r;for(let s=0;s<e.length;s++){const l=e[s];if(l){if(!H(l)){n.push(l),r=void 0;continue}if(!r){r=P(l,s,t),n.push(r);continue}if(oe(l,r)){r.children.push(l);continue}if((l.level||1)>r.level){const f=P(l,s,t);if(t==="html"){const u=r.children[r.children.length-1],h=C(C({},u),{},{children:[...u.children,f]});r.children[r.children.length-1]=h}else r.children.push(f);r=f;continue}if((l.level||1)<r.level){const f=n[n.length-1],u=f&&$(f,l);if(u){r=u,r.children.push(l);continue}r=P(l,s,t),n.push(r);continue}if(l.listItem!==r.listItem){const f=n[n.length-1],u=f&&$(f,{level:l.level||1});if(u&&u.listItem===l.listItem){r=u,r.children.push(l);continue}else{r=P(l,s,t),n.push(r);continue}}console.warn("Unknown state encountered for block",l),n.push(l)}}return n}function oe(e,t){return(e.level||1)===t.level&&e.listItem===t.listItem}function P(e,t,n){return{_type:"@list",_key:`${e._key||`${t}`}-parent`,mode:n,level:e.level||1,listItem:e.listItem,children:[e]}}function $(e,t){const n=t.level||1,r=t.listItem||"normal",s=typeof t.listItem=="string";if(K(e)&&(e.level||1)===n&&s&&(e.listItem||"normal")===r)return e;if(!("children"in e))return;const l=e.children[e.children.length-1];return l&&!T(l)?$(l,t):void 0}function G(e){let t="";return e.children.forEach(n=>{Q(n)?t+=n.text:Y(n)&&(t+=G(n))}),t}const ce="html",ue=["block","list","listItem","marks","types"],me=["listItem"],fe=["_key"];function W(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?W(Object(n),!0).forEach(function(r){pe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):W(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function pe(e,t,n){return(t=ye(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ye(e){var t=de(e,"string");return typeof t=="symbol"?t:t+""}function de(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function N(e,t){if(e==null)return{};var n,r,s=ke(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)n=l[r],t.includes(n)||{}.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}function ke(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}const he={number:({children:e})=>p.jsx("ol",{children:e}),bullet:({children:e})=>p.jsx("ul",{children:e})},ge=({children:e})=>p.jsx("li",{children:e}),be=({children:e,value:t})=>p.jsx("a",{href:t?.href,children:e}),xe={textDecoration:"underline"},_e={em:({children:e})=>p.jsx("em",{children:e}),strong:({children:e})=>p.jsx("strong",{children:e}),code:({children:e})=>p.jsx("code",{children:e}),underline:({children:e})=>p.jsx("span",{style:xe,children:e}),"strike-through":({children:e})=>p.jsx("del",{children:e}),link:be},I=(e,t)=>`[@portabletext/react] Unknown ${e}, specify a component for it in the \`components.${t}\` prop`,V=e=>I(`block type "${e}"`,"types"),je=e=>I(`mark type "${e}"`,"marks"),ve=e=>I(`block style "${e}"`,"block"),Ee=e=>I(`list style "${e}"`,"list"),we=e=>I(`list item style "${e}"`,"listItem");function Ie(e){console.warn(e)}const q={display:"none"},Oe=({value:e,isInline:t})=>{const n=V(e._type);return t?p.jsx("span",{style:q,children:n}):p.jsx("div",{style:q,children:n})},Pe=({markType:e,children:t})=>p.jsx("span",{className:`unknown__pt__mark__${e}`,children:t}),Te=({children:e})=>p.jsx("p",{children:e}),Se=({children:e})=>p.jsx("ul",{children:e}),Le=({children:e})=>p.jsx("li",{children:e}),De=()=>p.jsx("br",{}),$e={normal:({children:e})=>p.jsx("p",{children:e}),blockquote:({children:e})=>p.jsx("blockquote",{children:e}),h1:({children:e})=>p.jsx("h1",{children:e}),h2:({children:e})=>p.jsx("h2",{children:e}),h3:({children:e})=>p.jsx("h3",{children:e}),h4:({children:e})=>p.jsx("h4",{children:e}),h5:({children:e})=>p.jsx("h5",{children:e}),h6:({children:e})=>p.jsx("h6",{children:e})},F={types:{},block:$e,marks:_e,list:he,listItem:ge,hardBreak:De,unknownType:Oe,unknownMark:Pe,unknownList:Se,unknownListItem:Le,unknownBlockStyle:Te};function Ne(e,t){const{block:n,list:r,listItem:s,marks:l,types:f}=t,u=N(t,ue);return x(x({},e),{},{block:w(e,t,"block"),list:w(e,t,"list"),listItem:w(e,t,"listItem"),marks:w(e,t,"marks"),types:w(e,t,"types")},u)}function w(e,t,n){const r=t[n],s=e[n];return typeof r=="function"||r&&typeof s=="function"?r:r?x(x({},s),r):s}function Re({value:e,components:t,listNestingMode:n,onMissingComponent:r=Ie}){const s=r||Be,l=Array.isArray(e)?e:[e],f=ae(l,n||ce),u=v.useMemo(()=>t?Ne(F,t):F,[t]),h=v.useMemo(()=>Ae(u,s),[u,s]),b=f.map((_,o)=>h({node:_,index:o,isInline:!1,renderNode:h}));return p.jsx(p.Fragment,{children:b})}const Ae=(e,t)=>{function n(o){const{node:i,index:a,isInline:m}=o,y=i._key||`node-${a}`;return K(i)?l(i,a,y):H(i)?s(i,a,y):Y(i)?f(i,a,y):r(i)?_(i,a,y,m):z(i)?u(i,a,y,m):Q(i)?h(i,y):b(i,a,y,m)}function r(o){return o._type in e.types}function s(o,i,a){const m=J({node:o,index:i,isInline:!1,renderNode:n}),y=e.listItem,d=(typeof y=="function"?y:y[o.listItem])||e.unknownListItem;if(d===e.unknownListItem){const g=o.listItem||"bullet";t(we(g),{type:g,nodeType:"listItemStyle"})}let k=m.children;if(o.style&&o.style!=="normal"){const{listItem:g}=o,j=N(o,me);k=n({node:j,index:i,isInline:!1})}return p.jsx(d,{value:o,index:i,isInline:!1,renderNode:n,children:k},a)}function l(o,i,a){const m=o.children.map((k,g)=>n({node:k._key?k:x(x({},k),{},{_key:`li-${i}-${g}`}),index:g,isInline:!1})),y=e.list,d=(typeof y=="function"?y:y[o.listItem])||e.unknownList;if(d===e.unknownList){const k=o.listItem||"bullet";t(Ee(k),{nodeType:"listStyle",type:k})}return p.jsx(d,{value:o,index:i,isInline:!1,renderNode:n,children:m},a)}function f(o,i,a){const{markDef:m,markType:y,markKey:d}=o,k=e.marks[y]||e.unknownMark,g=o.children.map((j,S)=>n({node:j,index:S,isInline:!0}));return k===e.unknownMark&&t(je(y),{nodeType:"mark",type:y}),p.jsx(k,{text:G(o),value:m,markType:y,markKey:d,renderNode:n,children:g},a)}function u(o,i,a,m){const y=J({node:o,index:i,isInline:m,renderNode:n}),{_key:d}=y,k=N(y,fe),g=k.node.style||"normal",j=(typeof e.block=="function"?e.block:e.block[g])||e.unknownBlockStyle;return j===e.unknownBlockStyle&&t(ve(g),{nodeType:"blockStyle",type:g}),p.jsx(j,x(x({},k),{},{value:k.node,renderNode:n}),a)}function h(o,i){if(o.text===`
`){const a=e.hardBreak;return a?p.jsx(a,{},i):`
`}return o.text}function b(o,i,a,m){const y={value:o,isInline:m,index:i,renderNode:n};t(V(o._type),{nodeType:"block",type:o._type});const d=e.unknownType;return p.jsx(d,x({},y),a)}function _(o,i,a,m){const y={value:o,isInline:m,index:i,renderNode:n},d=e.types[o._type];return d?p.jsx(d,x({},y),a):null}return n};function J(e){const{node:t,index:n,isInline:r,renderNode:s}=e,l=se(t).map((f,u)=>s({node:f,isInline:!0,index:u,renderNode:s}));return{_key:t._key||`block-${n}`,children:l,index:n,isInline:r,node:t}}function Be(){}var Me={};const Je=()=>{const{slug:e}=X(),[t,n]=v.useState(null),[r,s]=v.useState([]),[l,f]=v.useState(!0),[u,h]=v.useState(null);v.useEffect(()=>{(async()=>{if(e){f(!0),h(null);try{const m=await R.fetch(`
          *[_type == "article" && slug.current == $slug][0] {
            title,
            "slug": slug.current,
            publishedOn,
            shortDesc,
            mainImage {
              asset-> {
                _id,
                url
              },
              alt,
              caption,
              attribution
            },
            "categories": categories[]->{ title, "slug": slug.current },
            bodyContent
          }
        `,{slug:e});if(!m){h("Article not found"),f(!1);return}n(m);const d=await R.fetch(`
          *[_type == "article" && 
            slug.current != $slug && 
            count((categories[]->._id)[@ in ^.^.categories[]->._id]) > 0] | order(publishedOn desc)[0...3] {
            title,
            "slug": slug.current,
            shortDesc,
            mainImage,
            publishedOn,
            "categories": categories[]->{ title }
          }
        `,{slug:e});s(d)}catch(a){console.error("Error fetching article:",a),h("Failed to load article")}finally{f(!1)}}})()},[e]);const b=i=>i?new Date(i).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"",_={types:{textBlockWithTitle:({value:i})=>c.createElement("div",{className:"text-block-with-title"},c.createElement("h3",{className:"text-block-title"},i.title),c.createElement("div",{className:"text-block-body"},i.bodyText)),listBlockWithTitle:({value:i})=>c.createElement("div",{className:"list-block-with-title"},c.createElement("h3",{className:"list-block-title"},i.title),i.summaryText&&c.createElement("p",{className:"list-block-summary"},i.summaryText),i.ordered?c.createElement("ol",{className:"list-block-items"},i.items.map((a,m)=>c.createElement("li",{key:m},a))):c.createElement("ul",{className:"list-block-items"},i.items.map((a,m)=>c.createElement("li",{key:m},a)))),image:({value:i})=>c.createElement("figure",{className:"article-image"},c.createElement("img",{src:o(i,800),alt:i.alt||"",loading:"lazy"}),i.caption&&c.createElement("figcaption",null,i.caption))},marks:{link:({children:i,value:a})=>{const m=a.href.startsWith("/")?void 0:"noreferrer noopener";return c.createElement("a",{href:a.href,rel:m,target:a.blank?"_blank":void 0},i)}}},o=(i,a=800,m)=>{if(!i||!i.asset||!i.asset._ref)return"";const y=i.asset._ref,[d,k,g]=y.split("-"),j=`https://cdn.sanity.io/images/${Me.REACT_APP_SANITY_PROJECT_ID}/content/`,S=m?`?w=${a}&h=${m}&fit=crop&auto=format`:`?w=${a}&auto=format`;return`${j}${k}.${g}${S}`};return l?c.createElement(O,{title:"Loading article..."},c.createElement("p",null,"Loading...")):u?c.createElement(O,{title:"Error"},c.createElement("p",null,"Could not load article. ",u)):t?c.createElement(O,{title:t.title,subtitle:t.categories?.[0]?.title?`${t.categories[0].title} - Published on ${b(t.publishedOn)}`:`Published on ${b(t.publishedOn)}`},c.createElement("div",{className:"article-breadcrumbs"},c.createElement(L,{to:"/resources"},"Resources"),t.categories?.[0]&&c.createElement(c.Fragment,null,c.createElement("span",null," / "),c.createElement(L,{to:`/resources?topic=${encodeURIComponent(t.categories[0].title)}`},t.categories[0].title)),c.createElement("span",null," / ",t.title)),t.mainImage&&c.createElement("div",{className:"article-main-image-container"},c.createElement("img",{src:o(t.mainImage,800),alt:t.mainImage.alt||t.title,className:"article-main-image"}),t.mainImage.caption&&c.createElement("figcaption",{className:"article-image-caption"},t.mainImage.caption,t.mainImage.attribution&&c.createElement("span",{className:"image-attribution"}," — ",t.mainImage.attribution))),c.createElement("div",{className:"article-body-content"},c.createElement(Re,{value:t.bodyContent,components:_})),r.length>0&&c.createElement("section",{className:"related-articles-section"},c.createElement("h2",{className:"related-articles-title"},"Related Articles"),c.createElement("div",{className:"resources-article-grid"},r.map(i=>c.createElement("div",{key:i.slug,className:"article-card"},i.mainImage&&c.createElement("div",{className:"article-image"},c.createElement("img",{src:o(i.mainImage,300,200),alt:i.title})),c.createElement("div",{className:"article-content"},c.createElement("h3",{className:"article-title"},i.title),i.shortDesc&&c.createElement("p",{className:"article-excerpt"},i.shortDesc),c.createElement(L,{to:`/resources/${i.slug}`,className:"read-article-link"},"Read article →"))))))):c.createElement(O,{title:"Not Found"},c.createElement("p",null,"Article not found."))};export{Je as default};
