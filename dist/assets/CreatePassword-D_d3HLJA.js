import{r as o,a as S,R as e}from"./react-D8qwWWc-.js";import{S as P}from"./StandardLayout-CODG-ZJt.js";import{F as N}from"./FormBox-DKl1xVdV.js";import{T as m}from"./TextInput-CfcbAWFU.js";import{P as C}from"./PrimaryButton-D-OJOajV.js";/* empty css                        */import{s as I,c as p,H as f}from"./amplify-CUteMs5F.js";import"./vendor-BRRJ753s.js";import"./PageWrapper-qXWqd5_q.js";import"./Footer-DbTn4dsc.js";/* empty css                  */const L=()=>{const[t,w]=o.useState(""),[s,y]=o.useState(""),[c,h]=o.useState(""),[u,a]=o.useState(""),[d,n]=o.useState(!1),g=S(),E=async r=>{if(r.preventDefault(),a(""),n(!0),!t){a("Email is required"),n(!1);return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)){a("Please enter a valid email address."),n(!1);return}if(s.length<8){a("Password must be at least 8 characters"),n(!1);return}if(s!==c){a("Passwords do not match"),n(!1);return}try{const{isSignUpComplete:l}=await I({username:t.trim(),password:s,attributes:{email:t.trim()}});if(l){await new Promise(i=>setTimeout(i,2e3));try{const{isSignedIn:i}=await p({username:t.trim(),password:s});i?(f.dispatch("auth",{event:"signIn"}),localStorage.removeItem("isNewUser"),g("/welcome",{state:{isNewUser:!1}})):a("Sign in failed after registration. Please try logging in.")}catch(i){if(i.name==="EmptySignInUsername"){await new Promise(v=>setTimeout(v,1e3));const{isSignedIn:b}=await p({username:t.trim(),password:s});if(b){f.dispatch("auth",{event:"signIn"}),localStorage.removeItem("isNewUser"),g("/welcome",{state:{isNewUser:!1}});return}}a(i.message||"Registration failed. Please try again.")}}else a("Sign up incomplete. Please try again.")}catch(l){console.error("Sign up error:",l),a(l.message||"Registration failed. Please try again.")}finally{n(!1)}};return e.createElement(P,{title:e.createElement(e.Fragment,null,e.createElement("h2",{className:"h1sub pre-title-subtitle"},"Create your account"),e.createElement("span",{className:"h1"},"Set your ",e.createElement("span",{className:"h1b"},"email")," and ",e.createElement("span",{className:"h1b"},"password")," to complete registration."))},e.createElement("div",{className:"onboarding-form-content"},e.createElement(N,{className:"onboarding-formbox"},e.createElement("form",{className:"standard-form",onSubmit:E,noValidate:!0},e.createElement(m,{label:"Email Address",value:t,onChange:r=>w(r.target.value),type:"email",required:!0,autoFocus:!0}),e.createElement(m,{label:"Create Password",value:s,onChange:r=>y(r.target.value),type:"password",placeholder:"Create a secure password",required:!0,helperText:"Use at least 8 characters"}),e.createElement(m,{label:"Confirm Password",value:c,onChange:r=>h(r.target.value),type:"password",placeholder:"Confirm your password",required:!0}),u&&e.createElement("div",{className:"error-message"},u),e.createElement("div",{className:"onboarding-button-container"},e.createElement(C,{type:"submit",disabled:d},d?"Creating Account...":"Create Account")),e.createElement("p",{className:"privacy-text"},"By creating an account you are accepting our"," ",e.createElement("a",{href:"/terms",target:"_blank",rel:"noreferrer",className:"privacy-link"},"Terms of Service")," ","and"," ",e.createElement("a",{href:"/privacy",target:"_blank",rel:"noreferrer",className:"privacy-link"},"Privacy Policy"),".")))))};export{L as default};
