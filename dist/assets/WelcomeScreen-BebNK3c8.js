import{a as v,u as w,r as S,R as e}from"./react-D8qwWWc-.js";import{u as k}from"./usePlanningData-KxF1tlZ7.js";import{u as x}from"./index-C_jNqslI.js";import{F as p}from"./FormBox-DKl1xVdV.js";import{S as h}from"./StandardLayout-CODG-ZJt.js";import{P as o}from"./PrimaryButton-D-OJOajV.js";import"./vendor-BRRJ753s.js";import"./amplify-CUteMs5F.js";import"./PageWrapper-qXWqd5_q.js";import"./Footer-DbTn4dsc.js";const E=[{iconSrc:"/Picture/LP-Note-Write.svg",altText:"Plan and Update Icon",title:"Plan with Confidence",text:" Create and revisit your farewell anytime. Your life may change — your legacy can grow with it."},{iconSrc:"/Picture/email.svg",altText:"Share Icon",title:"Share with Clarity",text:"Make your wishes known, so the people you love don’t have to guess — or carry the burden alone."}],j=()=>{const r=v(),g=w(),{formData:a,isLoading:u,loadPlanData:d}=k(),{user:s,isAuthenticated:i,isLoading:m,error:y}=x(),c=g.state?.isNewUser===!0||!a||!a._metadata?.lastVisitedStep&&(!a.basicInformation||Object.keys(a.basicInformation).length===0),n=!c&&!!(a&&(a._metadata&&a._metadata.lastVisitedStep||a.basicInformation&&Object.keys(a.basicInformation).length>0)),f=()=>{r("/basic-information")},N=()=>{const t=a?._metadata?.lastVisitedStep,l=a?._metadata?.isCompleted;r(l?"/confirm-wishes":t||"/basic-information")},b=()=>{r("/basic-information",{state:{startFresh:!0}})};return S.useEffect(()=>{i&&s?.userId&&!c&&d()},[i,s?.userId,c,d]),u||m?c&&i&&!m?e.createElement(h,{title:e.createElement(e.Fragment,null,e.createElement("span",{className:"h1"},"Your")," ",e.createElement("span",{className:"h1b"},"farewell")," ",e.createElement("span",{className:"h1"},"is more than a will")),subtitle:e.createElement("span",{className:"h1sub"},"We're here to shape your legacy — your voice, your way.")},e.createElement(p,{className:"standard-formbox"},e.createElement("div",{className:"welcome-features"},E.map((t,l)=>e.createElement("div",{key:l,className:"feature-item"},e.createElement("div",{className:"feature-icon-container"},e.createElement("img",{src:t.iconSrc,alt:t.altText,className:"feature-icon"})),e.createElement("div",{className:"feature-text-container"},e.createElement("h3",{className:"feature-title"},t.title),e.createElement("p",{className:"feature-description"},t.text))))),e.createElement("div",{className:"invite-primary-button",style:{display:"flex",justifyContent:"center",gap:"1rem"}},e.createElement(o,{onClick:f},"Start Planning")))):e.createElement("div",{className:"app-loading"},"Loading...",e.createElement("br",null),e.createElement("span",{style:{color:"red",fontWeight:"bold"}},"Debug: WelcomeScreen is waiting for plan data or authentication to finish."),e.createElement("br",null),e.createElement("div",{style:{color:"blue",marginTop:8}},e.createElement("div",null,"authIsLoading: ",String(m)),e.createElement("div",null,"isLoading (plan): ",String(u)),e.createElement("div",null,"isAuthenticated: ",String(i)),e.createElement("div",null,"User: ",s?JSON.stringify(s):"null"),e.createElement("div",null,"Auth Error: ",y||"none")),e.createElement("br",null),"If this never disappears, check your network, backend, or authentication state."):e.createElement(h,{title:e.createElement(e.Fragment,null,e.createElement("span",{className:"h1"},n?"Welcome":"Your")," ",e.createElement("span",{className:"h1b"},n?"back!":"farewell")," ",e.createElement("span",{className:"h1"},n?"":"is more than a will")),subtitle:e.createElement("span",{className:"h1sub"},n?"We found your existing farewell plan. What would you like to do?":"We're here to shape your legacy — your voice, your way.")},e.createElement(p,{className:"standard-formbox"},e.createElement("div",{className:"welcome-features"},E.map((t,l)=>e.createElement("div",{key:l,className:"feature-item"},e.createElement("div",{className:"feature-icon-container"},e.createElement("img",{src:t.iconSrc,alt:t.altText,className:"feature-icon"})),e.createElement("div",{className:"feature-text-container"},e.createElement("h3",{className:"feature-title"},t.title),e.createElement("p",{className:"feature-description"},t.text))))),e.createElement("div",{className:"invite-primary-button",style:{display:"flex",justifyContent:"center",gap:"1rem"}},n?e.createElement(e.Fragment,null,e.createElement(o,{onClick:N},"Resume Planning"),e.createElement(o,{onClick:b,style:{background:"#fff",color:"#333",border:"2px solid #ccc"}},"Start Fresh")):e.createElement(o,{onClick:f},"Start Planning"))))};export{j as default};
