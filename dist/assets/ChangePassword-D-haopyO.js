import{y,z as N,r as a,R as e,L as C}from"./index-BV1G-A6l.js";import{S as v}from"./StandardLayout-B5vNjcmC.js";import{F as S}from"./FormBox-Bv9HjqcQ.js";import{T as p}from"./TextInput-DRecwbNg.js";import{P as R}from"./PrimaryButton-Dn71mr9y.js";/* empty css             */import{c as L}from"./confirmResetPassword-Dkqyz8Ks.js";import"./PageWrapper-BSOED49-.js";import"./Footer-cqre2hs1.js";import"./TextInput-DweamiJn.js";const D=()=>{const n=y(),l=N(),[i,h]=a.useState(""),[m,P]=a.useState(""),[r,E]=a.useState(""),[c,_]=a.useState(""),[o,d]=a.useState(!1),[u,w]=a.useState(""),[g,t]=a.useState("");a.useEffect(()=>{l.state?.email?h(l.state.email):(t("No email address provided. Please start the password reset process again."),setTimeout(()=>n("/forgot-password"),4e3))},[l.state,n]);const b=async s=>{if(s.preventDefault(),t(""),w(""),!m||!r||!c){t("Please fill in all fields.");return}if(r!==c){t("Passwords do not match.");return}if(r.length<8){t("Password must be at least 8 characters long.");return}d(!0);try{await L({username:i,confirmationCode:m,newPassword:r}),w("Your password has been successfully reset! Redirecting to login..."),d(!1),setTimeout(()=>{n("/login",{state:{message:"Password successfully reset. Please log in.",email:i}})},3e3)}catch(f){console.error("Error resetting password:",f),f.name==="CodeMismatchException"?t("Invalid confirmation code. Please check the code and try again."):t(f.message||"An error occurred. Please try again."),d(!1)}};return e.createElement(v,{title:"Reset Your Password",subtitle:"Please create a new password for your account.",className:"reset-password-page"},e.createElement(S,null,u&&e.createElement("p",{className:"auth-form__message success",role:"alert"},u),!u&&e.createElement("form",{onSubmit:b,className:"auth-form"},e.createElement("p",{className:"auth-form__instruction"},"A password reset code has been sent to ",e.createElement("strong",null,i),". Please enter the code and your new password below."),e.createElement(p,{id:"confirmationCode",name:"confirmationCode",type:"text",label:"Reset Code",placeholder:"Enter the code from your email",value:m,onChange:s=>P(s.target.value),disabled:o,containerClassName:"auth-form__input-field"}),e.createElement(p,{id:"newPassword",name:"newPassword",type:"password",label:"New Password",placeholder:"Enter your new password",value:r,onChange:s=>E(s.target.value),disabled:o,containerClassName:"auth-form__input-field"}),e.createElement(p,{id:"confirmPassword",name:"confirmPassword",type:"password",label:"Confirm New Password",placeholder:"Confirm your new password",value:c,onChange:s=>_(s.target.value),disabled:o,containerClassName:"auth-form__input-field"}),g&&e.createElement("p",{className:"auth-form__message error",role:"alert"},g),e.createElement("div",{className:"auth-form__button-container"},e.createElement(R,{type:"submit",disabled:o,className:"auth-form__submit-button"},o?"Resetting...":"Set New Password")),e.createElement("div",{className:"auth-form__links"},e.createElement(C,{to:"/login",className:"auth-form__link"},"Back to Login")))))};export{D as default};
